{
  "hash": "18da4b2e7efd22bec8ca34c9aab5ecec",
  "result": {
    "markdown": "---\ntitle: \"Interactive Sliders with Crosstalk and Plotly\"\nauthor: \n  - \"Jon Minton\"\ndate: \"2023-11-30\"\ncode-fold: true\ncategories: [R, plotly, crosstalk]\n---\n\n\n## Introduction\n\nBelow is an example of creating a plotly chart with an interactive slider using crosstalk.\n\nBy default, the plot shows the proportion of datazones in a local authority that are in the 15% most deprived datazones in Scotland. (Using the 2020 SIMD). \n\nThe slider allows different thresholds than the 15% default to be selected. \n\n## Data Downloading and Preparation\n\n*To see the code itself, just click on the word 'code' to open up the block'.*\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(plotly)\nlibrary(crosstalk)\nlibrary(here)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nif(!file.exists(here(\"simd_data.xlsx\"))){\n  download.file(\n    url = \"https://www.gov.scot/binaries/content/documents/govscot/publications/statistics/2020/01/scottish-index-of-multiple-deprivation-2020-data-zone-look-up-file/documents/scottish-index-of-multiple-deprivation-data-zone-look-up/scottish-index-of-multiple-deprivation-data-zone-look-up/govscot%3Adocument/SIMD%2B2020v2%2B-%2Bdatazone%2Blookup.xlsx\",\n    destfile = here(\"simd_data.xlsx\"),\n    mode = \"wb\"\n  )\n}\n\ndta <- openxlsx::readWorkbook(here(\"simd_data.xlsx\"), sheet = \"SIMD 2020v2 DZ lookup data\")\n```\n:::\n\n\nThe code for the figure itself is below. It's quite a convoluted process. There's almost certaintly neater ways of doing this. The main thing to keep in mind is *all the figures exist; just only one is visible at a time*.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# So let's construct a new aval containing the different x-y tuples given the threshold selected\n\ncalc_prop_deprived <- function(q, dta){\n    dta %>% \n      group_by(HBname) %>% \n      summarise(prop_deprived = mean(pct_rank < q)) %>% \n      ungroup()\n}\n\ndf_rank <- \n  dta %>% \n    select(HBname, SIMD2020v2_Rank) %>% \n    mutate(pct_rank = SIMD2020v2_Rank / max(SIMD2020v2_Rank))\n\n\nshared_df <- tibble(\n  dep_quants = seq(0.05, 0.95, by = 0.05)\n) %>% \n  mutate(derived_props = map(dep_quants, calc_prop_deprived, dta = df_rank)) %>% \n  unnest(derived_props) %>% \n  mutate(undep_quants = 1 - dep_quants) \n\n\n# Now to put it in the structure, and set active for `dep_quants = 0.15`\n\n\nunique_dep_quants <- unique(shared_df$dep_quants)\nn_steps <- length(unique_dep_quants)\n\ndep_vals <- list()\nfor (step in 1:n_steps){\n  tmp <- \n    shared_df %>% \n      filter(dep_quants == unique_dep_quants[step]) %>% \n      select(HBname, prop_deprived) %>% \n      mutate(HBname = reorder(HBname, prop_deprived))\n  \n  dep_vals[[step]] <- list(\n    visible = FALSE,\n    name = paste0('Quantile: ', unique_dep_quants[step]),\n    x=tmp$prop_deprived,\n    y=tmp$HBname\n    \n  ) \n}\n\n# 15% is the third list object \n\ndep_vals[3][[1]]$visible = TRUE\n\n# Now visualise \n\n# create steps and plot all traces\ndep_steps <- list()\nfig <- plot_ly() \nfor (i in c(3, 1, 2, 4:n_steps)) { # Start with 3 as this is 15% and this should determine the default HB order \n fig <- add_bars(fig,x=dep_vals[i][[1]]$x,  y=dep_vals[i][[1]]$y, visible = dep_vals[i][[1]]$visible, \n                 name = dep_vals[i][[1]]$name, orientation = 'h', hoverinfo = 'x+y', color = I(\"gray\"),\n                 showlegend = FALSE) %>% \n   layout(\n      title = list(\n        text = glue::glue(\"Proportion of datazones in Health Boards at least this deprived\")\n      ),\n      xaxis = list(\n        title = \"Proportion this deprived in Health Board\",\n        range = list(0, 1)\n      ),\n      yaxis = list(\n        title = \"Health Board\"\n      )\n   )\n\n  step <- list(args = list('visible', rep(FALSE, length(dep_vals))),\n               method = 'restyle')\n  step$args[[2]][i] = TRUE  \n  step$label = unique_dep_quants[i]\n  dep_steps[[i]] = step \n}  \n#names(dep_steps) <- unique_dep_quants\n\nfig <- fig %>%\n  layout(sliders = list(list(active = 2,\n                             currentvalue = list(prefix = \"Deprivation: \"),\n                             steps = dep_steps)))\n\nfig\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"plotly html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-1949b3588d014bf3ec4d\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-1949b3588d014bf3ec4d\">{\"x\":{\"visdat\":{\"3ce92c179e8\":[\"function () \",\"plotlyVisDat\"]},\"cur_data\":\"3ce92c179e8\",\"attrs\":{\"3ce92c179e8\":{\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"x\":[0.21115537848605578,0.048951048951048952,0.06965174129353234,0.15384615384615385,0.11056511056511056,0.0267022696929239,0.29423868312757201,0.075514874141876437,0.19248291571753987,0.069252077562326875,0,0,0.13610586011342155,0],\"y\":[\"Ayrshire and Arran\",\"Borders\",\"Dumfries and Galloway\",\"Fife\",\"Forth Valley\",\"Grampian\",\"Greater Glasgow and Clyde\",\"Highland\",\"Lanarkshire\",\"Lothian\",\"Orkney\",\"Shetland\",\"Tayside\",\"Western Isles\"],\"type\":\"bar\",\"visible\":true,\"name\":\"Quantile: 0.15\",\"orientation\":\"h\",\"hoverinfo\":\"x+y\",\"color\":[\"gray\"],\"showlegend\":false,\"inherit\":true},\"3ce92c179e8.1\":{\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"x\":[0.057768924302788842,0.006993006993006993,0.014925373134328358,0.028340080971659919,0.027027027027027029,0.0013351134846461949,0.12757201646090535,0.016018306636155607,0.056947608200455579,0.022160664819944598,0,0,0.041587901701323253,0],\"y\":[\"Ayrshire and Arran\",\"Borders\",\"Dumfries and Galloway\",\"Fife\",\"Forth Valley\",\"Grampian\",\"Greater Glasgow and Clyde\",\"Highland\",\"Lanarkshire\",\"Lothian\",\"Orkney\",\"Shetland\",\"Tayside\",\"Western Isles\"],\"type\":\"bar\",\"visible\":false,\"name\":\"Quantile: 0.05\",\"orientation\":\"h\",\"hoverinfo\":\"x+y\",\"color\":[\"gray\"],\"showlegend\":false,\"inherit\":true},\"3ce92c179e8.2\":{\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"x\":[0.1394422310756972,0.02097902097902098,0.054726368159203981,0.076923076923076927,0.066339066339066333,0.010680907877169559,0.22085048010973937,0.043478260869565216,0.11731207289293849,0.042474607571560477,0,0,0.094517958412098299,0],\"y\":[\"Ayrshire and Arran\",\"Borders\",\"Dumfries and Galloway\",\"Fife\",\"Forth Valley\",\"Grampian\",\"Greater Glasgow and Clyde\",\"Highland\",\"Lanarkshire\",\"Lothian\",\"Orkney\",\"Shetland\",\"Tayside\",\"Western Isles\"],\"type\":\"bar\",\"visible\":false,\"name\":\"Quantile: 0.1\",\"orientation\":\"h\",\"hoverinfo\":\"x+y\",\"color\":[\"gray\"],\"showlegend\":false,\"inherit\":true},\"3ce92c179e8.3\":{\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"x\":[0.30478087649402391,0.062937062937062943,0.094527363184079602,0.19635627530364372,0.16707616707616707,0.056074766355140186,0.34705075445816186,0.098398169336384442,0.2744874715261959,0.11449676823638043,0,0,0.17580340264650285,0],\"y\":[\"Ayrshire and Arran\",\"Borders\",\"Dumfries and Galloway\",\"Fife\",\"Forth Valley\",\"Grampian\",\"Greater Glasgow and Clyde\",\"Highland\",\"Lanarkshire\",\"Lothian\",\"Orkney\",\"Shetland\",\"Tayside\",\"Western Isles\"],\"type\":\"bar\",\"visible\":false,\"name\":\"Quantile: 0.2\",\"orientation\":\"h\",\"hoverinfo\":\"x+y\",\"color\":[\"gray\"],\"showlegend\":false,\"inherit\":true},\"3ce92c179e8.4\":{\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"x\":[0.36254980079681276,0.076923076923076927,0.13432835820895522,0.23684210526315788,0.23587223587223588,0.088117489986648867,0.39300411522633744,0.12814645308924486,0.34510250569476081,0.17913204062788551,0,0,0.22306238185255198,0],\"y\":[\"Ayrshire and Arran\",\"Borders\",\"Dumfries and Galloway\",\"Fife\",\"Forth Valley\",\"Grampian\",\"Greater Glasgow and Clyde\",\"Highland\",\"Lanarkshire\",\"Lothian\",\"Orkney\",\"Shetland\",\"Tayside\",\"Western Isles\"],\"type\":\"bar\",\"visible\":false,\"name\":\"Quantile: 0.25\",\"orientation\":\"h\",\"hoverinfo\":\"x+y\",\"color\":[\"gray\"],\"showlegend\":false,\"inherit\":true},\"3ce92c179e8.5\":{\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"x\":[0.40836653386454186,0.1048951048951049,0.19900497512437812,0.29554655870445345,0.27764127764127766,0.11615487316421896,0.44718792866941015,0.16933638443935928,0.41571753986332571,0.22714681440443213,0.034482758620689655,0.033333333333333333,0.27410207939508507,0.055555555555555552],\"y\":[\"Ayrshire and Arran\",\"Borders\",\"Dumfries and Galloway\",\"Fife\",\"Forth Valley\",\"Grampian\",\"Greater Glasgow and Clyde\",\"Highland\",\"Lanarkshire\",\"Lothian\",\"Orkney\",\"Shetland\",\"Tayside\",\"Western Isles\"],\"type\":\"bar\",\"visible\":false,\"name\":\"Quantile: 0.3\",\"orientation\":\"h\",\"hoverinfo\":\"x+y\",\"color\":[\"gray\"],\"showlegend\":false,\"inherit\":true},\"3ce92c179e8.6\":{\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"x\":[0.4760956175298805,0.16783216783216784,0.2537313432835821,0.34412955465587042,0.33906633906633904,0.1602136181575434,0.49108367626886146,0.22425629290617849,0.46810933940774485,0.27608494921514309,0.068965517241379309,0.033333333333333333,0.32136105860113423,0.055555555555555552],\"y\":[\"Ayrshire and Arran\",\"Borders\",\"Dumfries and Galloway\",\"Fife\",\"Forth Valley\",\"Grampian\",\"Greater Glasgow and Clyde\",\"Highland\",\"Lanarkshire\",\"Lothian\",\"Orkney\",\"Shetland\",\"Tayside\",\"Western Isles\"],\"type\":\"bar\",\"visible\":false,\"name\":\"Quantile: 0.35\",\"orientation\":\"h\",\"hoverinfo\":\"x+y\",\"color\":[\"gray\"],\"showlegend\":false,\"inherit\":true},\"3ce92c179e8.7\":{\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"x\":[0.52788844621513942,0.22377622377622378,0.3383084577114428,0.39878542510121456,0.3783783783783784,0.2109479305740988,0.52743484224965709,0.27002288329519453,0.53416856492027331,0.32963988919667592,0.20689655172413793,0.066666666666666666,0.35727788279773159,0.16666666666666666],\"y\":[\"Ayrshire and Arran\",\"Borders\",\"Dumfries and Galloway\",\"Fife\",\"Forth Valley\",\"Grampian\",\"Greater Glasgow and Clyde\",\"Highland\",\"Lanarkshire\",\"Lothian\",\"Orkney\",\"Shetland\",\"Tayside\",\"Western Isles\"],\"type\":\"bar\",\"visible\":false,\"name\":\"Quantile: 0.4\",\"orientation\":\"h\",\"hoverinfo\":\"x+y\",\"color\":[\"gray\"],\"showlegend\":false,\"inherit\":true},\"3ce92c179e8.8\":{\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"x\":[0.58565737051792832,0.30769230769230771,0.43781094527363185,0.45344129554655871,0.44963144963144963,0.24699599465954605,0.56035665294924553,0.35926773455377575,0.58428246013667429,0.36934441366574333,0.2413793103448276,0.10000000000000001,0.3988657844990548,0.3611111111111111],\"y\":[\"Ayrshire and Arran\",\"Borders\",\"Dumfries and Galloway\",\"Fife\",\"Forth Valley\",\"Grampian\",\"Greater Glasgow and Clyde\",\"Highland\",\"Lanarkshire\",\"Lothian\",\"Orkney\",\"Shetland\",\"Tayside\",\"Western Isles\"],\"type\":\"bar\",\"visible\":false,\"name\":\"Quantile: 0.45\",\"orientation\":\"h\",\"hoverinfo\":\"x+y\",\"color\":[\"gray\"],\"showlegend\":false,\"inherit\":true},\"3ce92c179e8.9\":{\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"x\":[0.64143426294820716,0.38461538461538464,0.54228855721393032,0.51417004048582993,0.49385749385749383,0.29639519359145527,0.59807956104252402,0.43478260869565216,0.62756264236902048,0.40627885503231764,0.37931034482758619,0.16666666666666666,0.44423440453686203,0.55555555555555558],\"y\":[\"Ayrshire and Arran\",\"Borders\",\"Dumfries and Galloway\",\"Fife\",\"Forth Valley\",\"Grampian\",\"Greater Glasgow and Clyde\",\"Highland\",\"Lanarkshire\",\"Lothian\",\"Orkney\",\"Shetland\",\"Tayside\",\"Western Isles\"],\"type\":\"bar\",\"visible\":false,\"name\":\"Quantile: 0.5\",\"orientation\":\"h\",\"hoverinfo\":\"x+y\",\"color\":[\"gray\"],\"showlegend\":false,\"inherit\":true},\"3ce92c179e8.10\":{\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"x\":[0.67131474103585653,0.46153846153846156,0.64179104477611937,0.56275303643724695,0.54054054054054057,0.36582109479305741,0.62551440329218111,0.52860411899313497,0.66628701594533024,0.45521698984302861,0.37931034482758619,0.26666666666666666,0.49716446124763702,0.80555555555555558],\"y\":[\"Ayrshire and Arran\",\"Borders\",\"Dumfries and Galloway\",\"Fife\",\"Forth Valley\",\"Grampian\",\"Greater Glasgow and Clyde\",\"Highland\",\"Lanarkshire\",\"Lothian\",\"Orkney\",\"Shetland\",\"Tayside\",\"Western Isles\"],\"type\":\"bar\",\"visible\":false,\"name\":\"Quantile: 0.55\",\"orientation\":\"h\",\"hoverinfo\":\"x+y\",\"color\":[\"gray\"],\"showlegend\":false,\"inherit\":true},\"3ce92c179e8.11\":{\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"x\":[0.70318725099601598,0.59440559440559437,0.71641791044776115,0.59514170040485825,0.58476658476658472,0.42723631508678239,0.65775034293552814,0.6361556064073226,0.6993166287015945,0.50323176361957522,0.37931034482758619,0.43333333333333335,0.55765595463137996,1],\"y\":[\"Ayrshire and Arran\",\"Borders\",\"Dumfries and Galloway\",\"Fife\",\"Forth Valley\",\"Grampian\",\"Greater Glasgow and Clyde\",\"Highland\",\"Lanarkshire\",\"Lothian\",\"Orkney\",\"Shetland\",\"Tayside\",\"Western Isles\"],\"type\":\"bar\",\"visible\":false,\"name\":\"Quantile: 0.6\",\"orientation\":\"h\",\"hoverinfo\":\"x+y\",\"color\":[\"gray\"],\"showlegend\":false,\"inherit\":true},\"3ce92c179e8.12\":{\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"x\":[0.75099601593625498,0.68531468531468531,0.76616915422885568,0.65384615384615385,0.63390663390663393,0.47930574098798395,0.69341563786008231,0.72311212814645309,0.74373576309794986,0.54293628808864269,0.62068965517241381,0.59999999999999998,0.61436672967863892,1],\"y\":[\"Ayrshire and Arran\",\"Borders\",\"Dumfries and Galloway\",\"Fife\",\"Forth Valley\",\"Grampian\",\"Greater Glasgow and Clyde\",\"Highland\",\"Lanarkshire\",\"Lothian\",\"Orkney\",\"Shetland\",\"Tayside\",\"Western Isles\"],\"type\":\"bar\",\"visible\":false,\"name\":\"Quantile: 0.65\",\"orientation\":\"h\",\"hoverinfo\":\"x+y\",\"color\":[\"gray\"],\"showlegend\":false,\"inherit\":true},\"3ce92c179e8.13\":{\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"x\":[0.78685258964143423,0.79020979020979021,0.8308457711442786,0.68825910931174084,0.67813267813267808,0.55140186915887845,0.72633744855967075,0.81006864988558347,0.77790432801822329,0.58079409048938135,0.75862068965517238,0.83333333333333337,0.70132325141776941,1],\"y\":[\"Ayrshire and Arran\",\"Borders\",\"Dumfries and Galloway\",\"Fife\",\"Forth Valley\",\"Grampian\",\"Greater Glasgow and Clyde\",\"Highland\",\"Lanarkshire\",\"Lothian\",\"Orkney\",\"Shetland\",\"Tayside\",\"Western Isles\"],\"type\":\"bar\",\"visible\":false,\"name\":\"Quantile: 0.7\",\"orientation\":\"h\",\"hoverinfo\":\"x+y\",\"color\":[\"gray\"],\"showlegend\":false,\"inherit\":true},\"3ce92c179e8.14\":{\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"x\":[0.8127490039840638,0.8601398601398601,0.88557213930348255,0.75101214574898789,0.73464373464373467,0.62483311081441928,0.75788751714677638,0.8810068649885584,0.82004555808656032,0.62603878116343492,0.86206896551724133,0.93333333333333335,0.77126654064272215,1],\"y\":[\"Ayrshire and Arran\",\"Borders\",\"Dumfries and Galloway\",\"Fife\",\"Forth Valley\",\"Grampian\",\"Greater Glasgow and Clyde\",\"Highland\",\"Lanarkshire\",\"Lothian\",\"Orkney\",\"Shetland\",\"Tayside\",\"Western Isles\"],\"type\":\"bar\",\"visible\":false,\"name\":\"Quantile: 0.75\",\"orientation\":\"h\",\"hoverinfo\":\"x+y\",\"color\":[\"gray\"],\"showlegend\":false,\"inherit\":true},\"3ce92c179e8.15\":{\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"x\":[0.8605577689243028,0.91608391608391604,0.91542288557213936,0.80364372469635625,0.78869778869778873,0.70894526034712946,0.79972565157750342,0.9221967963386728,0.86104783599088841,0.67313019390581719,0.96551724137931039,1,0.82419659735349715,1],\"y\":[\"Ayrshire and Arran\",\"Borders\",\"Dumfries and Galloway\",\"Fife\",\"Forth Valley\",\"Grampian\",\"Greater Glasgow and Clyde\",\"Highland\",\"Lanarkshire\",\"Lothian\",\"Orkney\",\"Shetland\",\"Tayside\",\"Western Isles\"],\"type\":\"bar\",\"visible\":false,\"name\":\"Quantile: 0.8\",\"orientation\":\"h\",\"hoverinfo\":\"x+y\",\"color\":[\"gray\"],\"showlegend\":false,\"inherit\":true},\"3ce92c179e8.16\":{\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"x\":[0.90039840637450197,0.95104895104895104,0.94029850746268662,0.8502024291497976,0.85995085995085996,0.77970627503337786,0.84567901234567899,0.94279176201372994,0.91457858769931666,0.7248384118190212,1,1,0.88846880907372405,1],\"y\":[\"Ayrshire and Arran\",\"Borders\",\"Dumfries and Galloway\",\"Fife\",\"Forth Valley\",\"Grampian\",\"Greater Glasgow and Clyde\",\"Highland\",\"Lanarkshire\",\"Lothian\",\"Orkney\",\"Shetland\",\"Tayside\",\"Western Isles\"],\"type\":\"bar\",\"visible\":false,\"name\":\"Quantile: 0.85\",\"orientation\":\"h\",\"hoverinfo\":\"x+y\",\"color\":[\"gray\"],\"showlegend\":false,\"inherit\":true},\"3ce92c179e8.17\":{\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"x\":[0.95617529880478092,0.965034965034965,0.97014925373134331,0.90080971659919029,0.90909090909090906,0.84512683578104142,0.89917695473251025,0.96796338672768878,0.96583143507972669,0.78024007386888272,1,1,0.93572778827977321,1],\"y\":[\"Ayrshire and Arran\",\"Borders\",\"Dumfries and Galloway\",\"Fife\",\"Forth Valley\",\"Grampian\",\"Greater Glasgow and Clyde\",\"Highland\",\"Lanarkshire\",\"Lothian\",\"Orkney\",\"Shetland\",\"Tayside\",\"Western Isles\"],\"type\":\"bar\",\"visible\":false,\"name\":\"Quantile: 0.9\",\"orientation\":\"h\",\"hoverinfo\":\"x+y\",\"color\":[\"gray\"],\"showlegend\":false,\"inherit\":true},\"3ce92c179e8.18\":{\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"x\":[0.98605577689243029,0.99300699300699302,0.99004975124378114,0.95951417004048578,0.95331695331695332,0.90921228304405877,0.94787379972565156,0.99084668192219683,0.99316628701594534,0.88088642659279781,1,1,0.9678638941398866,1],\"y\":[\"Ayrshire and Arran\",\"Borders\",\"Dumfries and Galloway\",\"Fife\",\"Forth Valley\",\"Grampian\",\"Greater Glasgow and Clyde\",\"Highland\",\"Lanarkshire\",\"Lothian\",\"Orkney\",\"Shetland\",\"Tayside\",\"Western Isles\"],\"type\":\"bar\",\"visible\":false,\"name\":\"Quantile: 0.95\",\"orientation\":\"h\",\"hoverinfo\":\"x+y\",\"color\":[\"gray\"],\"showlegend\":false,\"inherit\":true}},\"layout\":{\"margin\":{\"b\":40,\"l\":60,\"t\":25,\"r\":10},\"title\":{\"text\":\"Proportion of datazones in Health Boards at least this deprived\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"title\":\"Proportion this deprived in Health Board\",\"range\":[0,1]},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"title\":\"Health Board\",\"type\":\"category\",\"categoryorder\":\"array\",\"categoryarray\":[\"Orkney\",\"Shetland\",\"Western Isles\",\"Grampian\",\"Borders\",\"Lothian\",\"Dumfries and Galloway\",\"Highland\",\"Forth Valley\",\"Tayside\",\"Fife\",\"Lanarkshire\",\"Ayrshire and Arran\",\"Greater Glasgow and Clyde\"]},\"sliders\":[{\"active\":2,\"currentvalue\":{\"prefix\":\"Deprivation: \"},\"steps\":[{\"args\":[\"visible\",[true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]],\"method\":\"restyle\",\"label\":0.050000000000000003},{\"args\":[\"visible\",[false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]],\"method\":\"restyle\",\"label\":0.10000000000000001},{\"args\":[\"visible\",[false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]],\"method\":\"restyle\",\"label\":0.15000000000000002},{\"args\":[\"visible\",[false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]],\"method\":\"restyle\",\"label\":0.20000000000000001},{\"args\":[\"visible\",[false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false]],\"method\":\"restyle\",\"label\":0.25},{\"args\":[\"visible\",[false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false]],\"method\":\"restyle\",\"label\":0.29999999999999999},{\"args\":[\"visible\",[false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false]],\"method\":\"restyle\",\"label\":0.35000000000000003},{\"args\":[\"visible\",[false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false]],\"method\":\"restyle\",\"label\":0.40000000000000002},{\"args\":[\"visible\",[false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false]],\"method\":\"restyle\",\"label\":0.45000000000000001},{\"args\":[\"visible\",[false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false]],\"method\":\"restyle\",\"label\":0.5},{\"args\":[\"visible\",[false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false]],\"method\":\"restyle\",\"label\":0.55000000000000004},{\"args\":[\"visible\",[false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false]],\"method\":\"restyle\",\"label\":0.60000000000000009},{\"args\":[\"visible\",[false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false]],\"method\":\"restyle\",\"label\":0.65000000000000013},{\"args\":[\"visible\",[false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false]],\"method\":\"restyle\",\"label\":0.70000000000000007},{\"args\":[\"visible\",[false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false]],\"method\":\"restyle\",\"label\":0.75000000000000011},{\"args\":[\"visible\",[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false]],\"method\":\"restyle\",\"label\":0.80000000000000004},{\"args\":[\"visible\",[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false]],\"method\":\"restyle\",\"label\":0.85000000000000009},{\"args\":[\"visible\",[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false]],\"method\":\"restyle\",\"label\":0.90000000000000013},{\"args\":[\"visible\",[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true]],\"method\":\"restyle\",\"label\":0.94999999999999996}]}],\"hovermode\":\"closest\",\"showlegend\":false},\"source\":\"A\",\"config\":{\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"data\":[{\"x\":[0.21115537848605578,0.048951048951048952,0.06965174129353234,0.15384615384615385,0.11056511056511056,0.0267022696929239,0.29423868312757201,0.075514874141876437,0.19248291571753987,0.069252077562326875,0,0,0.13610586011342155,0],\"y\":[\"Ayrshire and Arran\",\"Borders\",\"Dumfries and Galloway\",\"Fife\",\"Forth Valley\",\"Grampian\",\"Greater Glasgow and Clyde\",\"Highland\",\"Lanarkshire\",\"Lothian\",\"Orkney\",\"Shetland\",\"Tayside\",\"Western Isles\"],\"type\":\"bar\",\"visible\":true,\"name\":\"Quantile: 0.15\",\"orientation\":\"h\",\"hoverinfo\":[\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\"],\"showlegend\":false,\"marker\":{\"color\":\"rgba(190,190,190,1)\",\"line\":{\"color\":\"rgba(190,190,190,1)\"}},\"textfont\":{\"color\":\"rgba(190,190,190,1)\"},\"error_y\":{\"color\":\"rgba(190,190,190,1)\"},\"error_x\":{\"color\":\"rgba(190,190,190,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null},{\"x\":[0.057768924302788842,0.006993006993006993,0.014925373134328358,0.028340080971659919,0.027027027027027029,0.0013351134846461949,0.12757201646090535,0.016018306636155607,0.056947608200455579,0.022160664819944598,0,0,0.041587901701323253,0],\"y\":[\"Ayrshire and Arran\",\"Borders\",\"Dumfries and Galloway\",\"Fife\",\"Forth Valley\",\"Grampian\",\"Greater Glasgow and Clyde\",\"Highland\",\"Lanarkshire\",\"Lothian\",\"Orkney\",\"Shetland\",\"Tayside\",\"Western Isles\"],\"type\":\"bar\",\"visible\":false,\"name\":\"Quantile: 0.05\",\"orientation\":\"h\",\"hoverinfo\":[\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\"],\"showlegend\":false,\"marker\":{\"color\":\"rgba(190,190,190,1)\",\"line\":{\"color\":\"rgba(190,190,190,1)\"}},\"textfont\":{\"color\":\"rgba(190,190,190,1)\"},\"error_y\":{\"color\":\"rgba(190,190,190,1)\"},\"error_x\":{\"color\":\"rgba(190,190,190,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null},{\"x\":[0.1394422310756972,0.02097902097902098,0.054726368159203981,0.076923076923076927,0.066339066339066333,0.010680907877169559,0.22085048010973937,0.043478260869565216,0.11731207289293849,0.042474607571560477,0,0,0.094517958412098299,0],\"y\":[\"Ayrshire and Arran\",\"Borders\",\"Dumfries and Galloway\",\"Fife\",\"Forth Valley\",\"Grampian\",\"Greater Glasgow and Clyde\",\"Highland\",\"Lanarkshire\",\"Lothian\",\"Orkney\",\"Shetland\",\"Tayside\",\"Western Isles\"],\"type\":\"bar\",\"visible\":false,\"name\":\"Quantile: 0.1\",\"orientation\":\"h\",\"hoverinfo\":[\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\"],\"showlegend\":false,\"marker\":{\"color\":\"rgba(190,190,190,1)\",\"line\":{\"color\":\"rgba(190,190,190,1)\"}},\"textfont\":{\"color\":\"rgba(190,190,190,1)\"},\"error_y\":{\"color\":\"rgba(190,190,190,1)\"},\"error_x\":{\"color\":\"rgba(190,190,190,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null},{\"x\":[0.30478087649402391,0.062937062937062943,0.094527363184079602,0.19635627530364372,0.16707616707616707,0.056074766355140186,0.34705075445816186,0.098398169336384442,0.2744874715261959,0.11449676823638043,0,0,0.17580340264650285,0],\"y\":[\"Ayrshire and Arran\",\"Borders\",\"Dumfries and Galloway\",\"Fife\",\"Forth Valley\",\"Grampian\",\"Greater Glasgow and Clyde\",\"Highland\",\"Lanarkshire\",\"Lothian\",\"Orkney\",\"Shetland\",\"Tayside\",\"Western Isles\"],\"type\":\"bar\",\"visible\":false,\"name\":\"Quantile: 0.2\",\"orientation\":\"h\",\"hoverinfo\":[\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\"],\"showlegend\":false,\"marker\":{\"color\":\"rgba(190,190,190,1)\",\"line\":{\"color\":\"rgba(190,190,190,1)\"}},\"textfont\":{\"color\":\"rgba(190,190,190,1)\"},\"error_y\":{\"color\":\"rgba(190,190,190,1)\"},\"error_x\":{\"color\":\"rgba(190,190,190,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null},{\"x\":[0.36254980079681276,0.076923076923076927,0.13432835820895522,0.23684210526315788,0.23587223587223588,0.088117489986648867,0.39300411522633744,0.12814645308924486,0.34510250569476081,0.17913204062788551,0,0,0.22306238185255198,0],\"y\":[\"Ayrshire and Arran\",\"Borders\",\"Dumfries and Galloway\",\"Fife\",\"Forth Valley\",\"Grampian\",\"Greater Glasgow and Clyde\",\"Highland\",\"Lanarkshire\",\"Lothian\",\"Orkney\",\"Shetland\",\"Tayside\",\"Western Isles\"],\"type\":\"bar\",\"visible\":false,\"name\":\"Quantile: 0.25\",\"orientation\":\"h\",\"hoverinfo\":[\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\"],\"showlegend\":false,\"marker\":{\"color\":\"rgba(190,190,190,1)\",\"line\":{\"color\":\"rgba(190,190,190,1)\"}},\"textfont\":{\"color\":\"rgba(190,190,190,1)\"},\"error_y\":{\"color\":\"rgba(190,190,190,1)\"},\"error_x\":{\"color\":\"rgba(190,190,190,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null},{\"x\":[0.40836653386454186,0.1048951048951049,0.19900497512437812,0.29554655870445345,0.27764127764127766,0.11615487316421896,0.44718792866941015,0.16933638443935928,0.41571753986332571,0.22714681440443213,0.034482758620689655,0.033333333333333333,0.27410207939508507,0.055555555555555552],\"y\":[\"Ayrshire and Arran\",\"Borders\",\"Dumfries and Galloway\",\"Fife\",\"Forth Valley\",\"Grampian\",\"Greater Glasgow and Clyde\",\"Highland\",\"Lanarkshire\",\"Lothian\",\"Orkney\",\"Shetland\",\"Tayside\",\"Western Isles\"],\"type\":\"bar\",\"visible\":false,\"name\":\"Quantile: 0.3\",\"orientation\":\"h\",\"hoverinfo\":[\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\"],\"showlegend\":false,\"marker\":{\"color\":\"rgba(190,190,190,1)\",\"line\":{\"color\":\"rgba(190,190,190,1)\"}},\"textfont\":{\"color\":\"rgba(190,190,190,1)\"},\"error_y\":{\"color\":\"rgba(190,190,190,1)\"},\"error_x\":{\"color\":\"rgba(190,190,190,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null},{\"x\":[0.4760956175298805,0.16783216783216784,0.2537313432835821,0.34412955465587042,0.33906633906633904,0.1602136181575434,0.49108367626886146,0.22425629290617849,0.46810933940774485,0.27608494921514309,0.068965517241379309,0.033333333333333333,0.32136105860113423,0.055555555555555552],\"y\":[\"Ayrshire and Arran\",\"Borders\",\"Dumfries and Galloway\",\"Fife\",\"Forth Valley\",\"Grampian\",\"Greater Glasgow and Clyde\",\"Highland\",\"Lanarkshire\",\"Lothian\",\"Orkney\",\"Shetland\",\"Tayside\",\"Western Isles\"],\"type\":\"bar\",\"visible\":false,\"name\":\"Quantile: 0.35\",\"orientation\":\"h\",\"hoverinfo\":[\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\"],\"showlegend\":false,\"marker\":{\"color\":\"rgba(190,190,190,1)\",\"line\":{\"color\":\"rgba(190,190,190,1)\"}},\"textfont\":{\"color\":\"rgba(190,190,190,1)\"},\"error_y\":{\"color\":\"rgba(190,190,190,1)\"},\"error_x\":{\"color\":\"rgba(190,190,190,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null},{\"x\":[0.52788844621513942,0.22377622377622378,0.3383084577114428,0.39878542510121456,0.3783783783783784,0.2109479305740988,0.52743484224965709,0.27002288329519453,0.53416856492027331,0.32963988919667592,0.20689655172413793,0.066666666666666666,0.35727788279773159,0.16666666666666666],\"y\":[\"Ayrshire and Arran\",\"Borders\",\"Dumfries and Galloway\",\"Fife\",\"Forth Valley\",\"Grampian\",\"Greater Glasgow and Clyde\",\"Highland\",\"Lanarkshire\",\"Lothian\",\"Orkney\",\"Shetland\",\"Tayside\",\"Western Isles\"],\"type\":\"bar\",\"visible\":false,\"name\":\"Quantile: 0.4\",\"orientation\":\"h\",\"hoverinfo\":[\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\"],\"showlegend\":false,\"marker\":{\"color\":\"rgba(190,190,190,1)\",\"line\":{\"color\":\"rgba(190,190,190,1)\"}},\"textfont\":{\"color\":\"rgba(190,190,190,1)\"},\"error_y\":{\"color\":\"rgba(190,190,190,1)\"},\"error_x\":{\"color\":\"rgba(190,190,190,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null},{\"x\":[0.58565737051792832,0.30769230769230771,0.43781094527363185,0.45344129554655871,0.44963144963144963,0.24699599465954605,0.56035665294924553,0.35926773455377575,0.58428246013667429,0.36934441366574333,0.2413793103448276,0.10000000000000001,0.3988657844990548,0.3611111111111111],\"y\":[\"Ayrshire and Arran\",\"Borders\",\"Dumfries and Galloway\",\"Fife\",\"Forth Valley\",\"Grampian\",\"Greater Glasgow and Clyde\",\"Highland\",\"Lanarkshire\",\"Lothian\",\"Orkney\",\"Shetland\",\"Tayside\",\"Western Isles\"],\"type\":\"bar\",\"visible\":false,\"name\":\"Quantile: 0.45\",\"orientation\":\"h\",\"hoverinfo\":[\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\"],\"showlegend\":false,\"marker\":{\"color\":\"rgba(190,190,190,1)\",\"line\":{\"color\":\"rgba(190,190,190,1)\"}},\"textfont\":{\"color\":\"rgba(190,190,190,1)\"},\"error_y\":{\"color\":\"rgba(190,190,190,1)\"},\"error_x\":{\"color\":\"rgba(190,190,190,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null},{\"x\":[0.64143426294820716,0.38461538461538464,0.54228855721393032,0.51417004048582993,0.49385749385749383,0.29639519359145527,0.59807956104252402,0.43478260869565216,0.62756264236902048,0.40627885503231764,0.37931034482758619,0.16666666666666666,0.44423440453686203,0.55555555555555558],\"y\":[\"Ayrshire and Arran\",\"Borders\",\"Dumfries and Galloway\",\"Fife\",\"Forth Valley\",\"Grampian\",\"Greater Glasgow and Clyde\",\"Highland\",\"Lanarkshire\",\"Lothian\",\"Orkney\",\"Shetland\",\"Tayside\",\"Western Isles\"],\"type\":\"bar\",\"visible\":false,\"name\":\"Quantile: 0.5\",\"orientation\":\"h\",\"hoverinfo\":[\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\"],\"showlegend\":false,\"marker\":{\"color\":\"rgba(190,190,190,1)\",\"line\":{\"color\":\"rgba(190,190,190,1)\"}},\"textfont\":{\"color\":\"rgba(190,190,190,1)\"},\"error_y\":{\"color\":\"rgba(190,190,190,1)\"},\"error_x\":{\"color\":\"rgba(190,190,190,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null},{\"x\":[0.67131474103585653,0.46153846153846156,0.64179104477611937,0.56275303643724695,0.54054054054054057,0.36582109479305741,0.62551440329218111,0.52860411899313497,0.66628701594533024,0.45521698984302861,0.37931034482758619,0.26666666666666666,0.49716446124763702,0.80555555555555558],\"y\":[\"Ayrshire and Arran\",\"Borders\",\"Dumfries and Galloway\",\"Fife\",\"Forth Valley\",\"Grampian\",\"Greater Glasgow and Clyde\",\"Highland\",\"Lanarkshire\",\"Lothian\",\"Orkney\",\"Shetland\",\"Tayside\",\"Western Isles\"],\"type\":\"bar\",\"visible\":false,\"name\":\"Quantile: 0.55\",\"orientation\":\"h\",\"hoverinfo\":[\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\"],\"showlegend\":false,\"marker\":{\"color\":\"rgba(190,190,190,1)\",\"line\":{\"color\":\"rgba(190,190,190,1)\"}},\"textfont\":{\"color\":\"rgba(190,190,190,1)\"},\"error_y\":{\"color\":\"rgba(190,190,190,1)\"},\"error_x\":{\"color\":\"rgba(190,190,190,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null},{\"x\":[0.70318725099601598,0.59440559440559437,0.71641791044776115,0.59514170040485825,0.58476658476658472,0.42723631508678239,0.65775034293552814,0.6361556064073226,0.6993166287015945,0.50323176361957522,0.37931034482758619,0.43333333333333335,0.55765595463137996,1],\"y\":[\"Ayrshire and Arran\",\"Borders\",\"Dumfries and Galloway\",\"Fife\",\"Forth Valley\",\"Grampian\",\"Greater Glasgow and Clyde\",\"Highland\",\"Lanarkshire\",\"Lothian\",\"Orkney\",\"Shetland\",\"Tayside\",\"Western Isles\"],\"type\":\"bar\",\"visible\":false,\"name\":\"Quantile: 0.6\",\"orientation\":\"h\",\"hoverinfo\":[\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\"],\"showlegend\":false,\"marker\":{\"color\":\"rgba(190,190,190,1)\",\"line\":{\"color\":\"rgba(190,190,190,1)\"}},\"textfont\":{\"color\":\"rgba(190,190,190,1)\"},\"error_y\":{\"color\":\"rgba(190,190,190,1)\"},\"error_x\":{\"color\":\"rgba(190,190,190,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null},{\"x\":[0.75099601593625498,0.68531468531468531,0.76616915422885568,0.65384615384615385,0.63390663390663393,0.47930574098798395,0.69341563786008231,0.72311212814645309,0.74373576309794986,0.54293628808864269,0.62068965517241381,0.59999999999999998,0.61436672967863892,1],\"y\":[\"Ayrshire and Arran\",\"Borders\",\"Dumfries and Galloway\",\"Fife\",\"Forth Valley\",\"Grampian\",\"Greater Glasgow and Clyde\",\"Highland\",\"Lanarkshire\",\"Lothian\",\"Orkney\",\"Shetland\",\"Tayside\",\"Western Isles\"],\"type\":\"bar\",\"visible\":false,\"name\":\"Quantile: 0.65\",\"orientation\":\"h\",\"hoverinfo\":[\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\"],\"showlegend\":false,\"marker\":{\"color\":\"rgba(190,190,190,1)\",\"line\":{\"color\":\"rgba(190,190,190,1)\"}},\"textfont\":{\"color\":\"rgba(190,190,190,1)\"},\"error_y\":{\"color\":\"rgba(190,190,190,1)\"},\"error_x\":{\"color\":\"rgba(190,190,190,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null},{\"x\":[0.78685258964143423,0.79020979020979021,0.8308457711442786,0.68825910931174084,0.67813267813267808,0.55140186915887845,0.72633744855967075,0.81006864988558347,0.77790432801822329,0.58079409048938135,0.75862068965517238,0.83333333333333337,0.70132325141776941,1],\"y\":[\"Ayrshire and Arran\",\"Borders\",\"Dumfries and Galloway\",\"Fife\",\"Forth Valley\",\"Grampian\",\"Greater Glasgow and Clyde\",\"Highland\",\"Lanarkshire\",\"Lothian\",\"Orkney\",\"Shetland\",\"Tayside\",\"Western Isles\"],\"type\":\"bar\",\"visible\":false,\"name\":\"Quantile: 0.7\",\"orientation\":\"h\",\"hoverinfo\":[\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\"],\"showlegend\":false,\"marker\":{\"color\":\"rgba(190,190,190,1)\",\"line\":{\"color\":\"rgba(190,190,190,1)\"}},\"textfont\":{\"color\":\"rgba(190,190,190,1)\"},\"error_y\":{\"color\":\"rgba(190,190,190,1)\"},\"error_x\":{\"color\":\"rgba(190,190,190,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null},{\"x\":[0.8127490039840638,0.8601398601398601,0.88557213930348255,0.75101214574898789,0.73464373464373467,0.62483311081441928,0.75788751714677638,0.8810068649885584,0.82004555808656032,0.62603878116343492,0.86206896551724133,0.93333333333333335,0.77126654064272215,1],\"y\":[\"Ayrshire and Arran\",\"Borders\",\"Dumfries and Galloway\",\"Fife\",\"Forth Valley\",\"Grampian\",\"Greater Glasgow and Clyde\",\"Highland\",\"Lanarkshire\",\"Lothian\",\"Orkney\",\"Shetland\",\"Tayside\",\"Western Isles\"],\"type\":\"bar\",\"visible\":false,\"name\":\"Quantile: 0.75\",\"orientation\":\"h\",\"hoverinfo\":[\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\"],\"showlegend\":false,\"marker\":{\"color\":\"rgba(190,190,190,1)\",\"line\":{\"color\":\"rgba(190,190,190,1)\"}},\"textfont\":{\"color\":\"rgba(190,190,190,1)\"},\"error_y\":{\"color\":\"rgba(190,190,190,1)\"},\"error_x\":{\"color\":\"rgba(190,190,190,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null},{\"x\":[0.8605577689243028,0.91608391608391604,0.91542288557213936,0.80364372469635625,0.78869778869778873,0.70894526034712946,0.79972565157750342,0.9221967963386728,0.86104783599088841,0.67313019390581719,0.96551724137931039,1,0.82419659735349715,1],\"y\":[\"Ayrshire and Arran\",\"Borders\",\"Dumfries and Galloway\",\"Fife\",\"Forth Valley\",\"Grampian\",\"Greater Glasgow and Clyde\",\"Highland\",\"Lanarkshire\",\"Lothian\",\"Orkney\",\"Shetland\",\"Tayside\",\"Western Isles\"],\"type\":\"bar\",\"visible\":false,\"name\":\"Quantile: 0.8\",\"orientation\":\"h\",\"hoverinfo\":[\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\"],\"showlegend\":false,\"marker\":{\"color\":\"rgba(190,190,190,1)\",\"line\":{\"color\":\"rgba(190,190,190,1)\"}},\"textfont\":{\"color\":\"rgba(190,190,190,1)\"},\"error_y\":{\"color\":\"rgba(190,190,190,1)\"},\"error_x\":{\"color\":\"rgba(190,190,190,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null},{\"x\":[0.90039840637450197,0.95104895104895104,0.94029850746268662,0.8502024291497976,0.85995085995085996,0.77970627503337786,0.84567901234567899,0.94279176201372994,0.91457858769931666,0.7248384118190212,1,1,0.88846880907372405,1],\"y\":[\"Ayrshire and Arran\",\"Borders\",\"Dumfries and Galloway\",\"Fife\",\"Forth Valley\",\"Grampian\",\"Greater Glasgow and Clyde\",\"Highland\",\"Lanarkshire\",\"Lothian\",\"Orkney\",\"Shetland\",\"Tayside\",\"Western Isles\"],\"type\":\"bar\",\"visible\":false,\"name\":\"Quantile: 0.85\",\"orientation\":\"h\",\"hoverinfo\":[\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\"],\"showlegend\":false,\"marker\":{\"color\":\"rgba(190,190,190,1)\",\"line\":{\"color\":\"rgba(190,190,190,1)\"}},\"textfont\":{\"color\":\"rgba(190,190,190,1)\"},\"error_y\":{\"color\":\"rgba(190,190,190,1)\"},\"error_x\":{\"color\":\"rgba(190,190,190,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null},{\"x\":[0.95617529880478092,0.965034965034965,0.97014925373134331,0.90080971659919029,0.90909090909090906,0.84512683578104142,0.89917695473251025,0.96796338672768878,0.96583143507972669,0.78024007386888272,1,1,0.93572778827977321,1],\"y\":[\"Ayrshire and Arran\",\"Borders\",\"Dumfries and Galloway\",\"Fife\",\"Forth Valley\",\"Grampian\",\"Greater Glasgow and Clyde\",\"Highland\",\"Lanarkshire\",\"Lothian\",\"Orkney\",\"Shetland\",\"Tayside\",\"Western Isles\"],\"type\":\"bar\",\"visible\":false,\"name\":\"Quantile: 0.9\",\"orientation\":\"h\",\"hoverinfo\":[\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\"],\"showlegend\":false,\"marker\":{\"color\":\"rgba(190,190,190,1)\",\"line\":{\"color\":\"rgba(190,190,190,1)\"}},\"textfont\":{\"color\":\"rgba(190,190,190,1)\"},\"error_y\":{\"color\":\"rgba(190,190,190,1)\"},\"error_x\":{\"color\":\"rgba(190,190,190,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null},{\"x\":[0.98605577689243029,0.99300699300699302,0.99004975124378114,0.95951417004048578,0.95331695331695332,0.90921228304405877,0.94787379972565156,0.99084668192219683,0.99316628701594534,0.88088642659279781,1,1,0.9678638941398866,1],\"y\":[\"Ayrshire and Arran\",\"Borders\",\"Dumfries and Galloway\",\"Fife\",\"Forth Valley\",\"Grampian\",\"Greater Glasgow and Clyde\",\"Highland\",\"Lanarkshire\",\"Lothian\",\"Orkney\",\"Shetland\",\"Tayside\",\"Western Isles\"],\"type\":\"bar\",\"visible\":false,\"name\":\"Quantile: 0.95\",\"orientation\":\"h\",\"hoverinfo\":[\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\",\"x+y\"],\"showlegend\":false,\"marker\":{\"color\":\"rgba(190,190,190,1)\",\"line\":{\"color\":\"rgba(190,190,190,1)\"}},\"textfont\":{\"color\":\"rgba(190,190,190,1)\"},\"error_y\":{\"color\":\"rgba(190,190,190,1)\"},\"error_x\":{\"color\":\"rgba(190,190,190,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null}],\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\nAs you can see, there's still some work to do regarding formatting. But it works! \n\n\n## Static \n\nFor comparison, here's the same data used to produce a static plot\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Now to put it in the structure, and set active for `dep_quants = 0.15`\n\ndf_15pc <- shared_df |> \n  filter(between(dep_quants, 0.149, 0.151)) |> \n  select(-dep_quants, -undep_quants)\n\ndf_15pc |>\n  mutate(pct_deprived = 100 * prop_deprived) |> \n  ggplot(aes(y= pct_deprived, x = fct_reorder(HBname, pct_deprived))) + \n  geom_bar(stat = \"identity\") +\n  geom_text(\n    aes(\n      label = ifelse(df_15pc$prop_deprived > 0, sprintf(\"%.1f\", pct_deprived), \"\")\n    ), \n    color = \"white\",\n    hjust = 1, \n    nudge_y = -0.5\n  ) + \n  coord_flip() + \n  labs(\n    x = \"Health Board\",\n    y = \"Percent of datazones in 15% most deprived proportion of Scotland\",\n    title = \"Percent of datazones in Health Board in 15% most deprived areas of Scotland\",\n    subtitle = \"SIMD 2020\"\n  ) + \n  geom_hline(yintercept = 0)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/htmlwidgets-1.6.2/htmlwidgets.js\"></script>\n<script src=\"../../site_libs/plotly-binding-4.10.2/plotly.js\"></script>\n<script src=\"../../site_libs/typedarray-0.1/typedarray.min.js\"></script>\n<script src=\"../../site_libs/jquery-3.5.1/jquery.min.js\"></script>\n<link href=\"../../site_libs/crosstalk-1.2.0/css/crosstalk.min.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/crosstalk-1.2.0/js/crosstalk.min.js\"></script>\n<link href=\"../../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/plotly-main-2.11.1/plotly-latest.min.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}