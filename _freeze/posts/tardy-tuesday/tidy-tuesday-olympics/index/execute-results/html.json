{
  "hash": "ed9f91c712f01149b2cf2f449289016a",
  "result": {
    "markdown": "---\ntitle: \"Tardy Tuesday: Olympics\"\ndate: \"2024-08-07\"\nauthor: \n    - \"Andrew\"\n    - \"Brendan\"\n    - \"Abram\"\n    - \"Kennedy\"\n    - \"Imran\"\n    - \"Gatz\"\n    - \"Jon\"\ncode-fold: true\nwarning: false\ncategories: [tidy tuesday, R, olympics]\n---\n\n\nThe most recent Tidy Tuesday contained [various types of data on previous Olympics](https://github.com/rfordatascience/tidytuesday/tree/master/data/2024/2024-08-06). Andrew led the session, with some additional contributions from Brendan. \n\n## Andrew's script\n\nLoad packages and data\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n\ntt_list <- tidytuesdayR::tt_load(\"2024-08-06\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n\tDownloading file 1 of 1: `olympics.csv`\n```\n:::\n\n```{.r .cell-code}\nlist2env(tt_list, envir = .GlobalEnv)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n<environment: R_GlobalEnv>\n```\n:::\n:::\n\n\nTake a glimpse:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(olympics)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 271,116\nColumns: 15\n$ id     <dbl> 1, 2, 3, 4, 5, 5, 5, 5, 5, 5, 6, 6, 6, 6, 6, 6, 6, 6, 7, 7, 7, …\n$ name   <chr> \"A Dijiang\", \"A Lamusi\", \"Gunnar Nielsen Aaby\", \"Edgar Lindenau…\n$ sex    <chr> \"M\", \"M\", \"M\", \"M\", \"F\", \"F\", \"F\", \"F\", \"F\", \"F\", \"M\", \"M\", \"M\"…\n$ age    <dbl> 24, 23, 24, 34, 21, 21, 25, 25, 27, 27, 31, 31, 31, 31, 33, 33,…\n$ height <dbl> 180, 170, NA, NA, 185, 185, 185, 185, 185, 185, 188, 188, 188, …\n$ weight <dbl> 80, 60, NA, NA, 82, 82, 82, 82, 82, 82, 75, 75, 75, 75, 75, 75,…\n$ team   <chr> \"China\", \"China\", \"Denmark\", \"Denmark/Sweden\", \"Netherlands\", \"…\n$ noc    <chr> \"CHN\", \"CHN\", \"DEN\", \"DEN\", \"NED\", \"NED\", \"NED\", \"NED\", \"NED\", …\n$ games  <chr> \"1992 Summer\", \"2012 Summer\", \"1920 Summer\", \"1900 Summer\", \"19…\n$ year   <dbl> 1992, 2012, 1920, 1900, 1988, 1988, 1992, 1992, 1994, 1994, 199…\n$ season <chr> \"Summer\", \"Summer\", \"Summer\", \"Summer\", \"Winter\", \"Winter\", \"Wi…\n$ city   <chr> \"Barcelona\", \"London\", \"Antwerpen\", \"Paris\", \"Calgary\", \"Calgar…\n$ sport  <chr> \"Basketball\", \"Judo\", \"Football\", \"Tug-Of-War\", \"Speed Skating\"…\n$ event  <chr> \"Basketball Men's Basketball\", \"Judo Men's Extra-Lightweight\", …\n$ medal  <chr> NA, NA, NA, \"Gold\", NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n```\n:::\n:::\n\n\nHow many sports of which kinds?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nolympics %>% \n  count(sport, sort=T) \n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 66 × 2\n   sport                    n\n   <chr>                <int>\n 1 Athletics            38624\n 2 Gymnastics           26707\n 3 Swimming             23195\n 4 Shooting             11448\n 5 Cycling              10859\n 6 Fencing              10735\n 7 Rowing               10595\n 8 Cross Country Skiing  9133\n 9 Alpine Skiing         8829\n10 Wrestling             7154\n# ℹ 56 more rows\n```\n:::\n:::\n\n\nEvents within the sport of athletics\n\n\n::: {.cell}\n\n```{.r .cell-code}\nolympics %>% \n  filter(sport == \"Athletics\") %>% \n  count(event, sort=T) \n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 83 × 2\n   event                                      n\n   <chr>                                  <int>\n 1 Athletics Men's Marathon                2093\n 2 Athletics Men's 100 metres              1936\n 3 Athletics Men's 4 x 100 metres Relay    1910\n 4 Athletics Men's 4 x 400 metres Relay    1749\n 5 Athletics Men's 200 metres              1495\n 6 Athletics Men's 400 metres              1417\n 7 Athletics Men's 800 metres              1321\n 8 Athletics Women's 4 x 100 metres Relay  1174\n 9 Athletics Men's 1,500 metres            1162\n10 Athletics Women's 100 metres            1063\n# ℹ 73 more rows\n```\n:::\n:::\n\n\nA visualisation: we wanted to show how long different sports have been running:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_obj <- \n  olympics %>% \n  filter(sport == \"Athletics\") %>% \n  group_by(event) %>% \n  summarise(Earliest_year = min(year),\n            Latest_year = max(year),\n            n = n()) %>%  \n  arrange(desc(n)) %>% \n  mutate(year_range = Latest_year - Earliest_year+1,\n         event = fct_reorder(event, year_range)) %>% \n  mutate(Sex = case_when(str_detect(str_to_lower(event), \"women\") ~ \"Female\",\n                         str_detect(str_to_lower(event), \"men\") ~ \"Male\",\n                         .default = \"Other\")) %>% \n  mutate(event_status = if_else(Latest_year == 2016, \"Live\", \"Dead\"))\n\nplot_obj %>%\n  slice(1:20) %>% \n  ggplot(aes(y=event, color = Sex))+\n  geom_errorbarh(aes(xmin=Earliest_year, xmax=Latest_year, height=0))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\nWhat about just Female events?\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_obj %>%\n#  slice(1:20) %>% \n  filter(Sex == \"Female\") %>% \n  ggplot(aes(y=event))+\n  geom_errorbarh(aes(xmin=Earliest_year, xmax=Latest_year, height=0))+\n  scale_x_continuous(breaks = seq(1920, 2020, by=10))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\nSlight modification to indicate whether events are still running:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_obj %>%\n  #  slice(1:20) %>% \n  filter(Sex == \"Female\") %>% \n  ggplot(aes(y=event))+\n  geom_errorbarh(aes(xmin=Earliest_year, xmax=Latest_year, height=0,\n                     linetype = event_status))+\n  scale_x_continuous(breaks = seq(1920, 2020, by=10)) + \n    scale_linetype_manual(values = c(\"dashed\", \"solid\"))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n\n## Brendan's script\n\n\n::: {.cell}\n\n```{.r .cell-code}\nolympics_dec <- olympics |>\n    mutate(decade = round(year, -1)) |>\n    mutate(bmi = weight / (height/100)^2) |>\n    filter(!is.na(bmi)) |> \n    group_by(event, sex, decade) |>\n    summarise(mean_bmi = mean(bmi), \n              min_bmi = min(bmi),\n              max_bmi = max(bmi)) |>\n    arrange(desc(mean_bmi))\n\nolympics_dec |>\n    distinct(event)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 612 × 2\n# Groups:   event, sex [612]\n   sex   event                                         \n   <chr> <chr>                                         \n 1 M     Weightlifting Men's Super-Heavyweight         \n 2 M     Swimming Men's 100 metres Freestyle           \n 3 F     Weightlifting Women's Super-Heavyweight       \n 4 M     Bobsleigh Men's Two                           \n 5 M     Weightlifting Men's Heavyweight               \n 6 M     Judo Men's Heavyweight                        \n 7 M     Wrestling Men's Super-Heavyweight, Greco-Roman\n 8 F     Judo Women's Heavyweight                      \n 9 M     Wrestling Men's Super-Heavyweight, Freestyle  \n10 M     Athletics Men's Shot Put                      \n# ℹ 602 more rows\n```\n:::\n:::\n\n\nHave shotputters got heavier or lighter over time?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nolympics_dec |>\n    filter(str_detect(event, \"Shot\")) |>\n    add_count(event) |>\n    filter(n > 3) |>\n    ggplot(aes(y = mean_bmi, x = decade, color = event)) +\n    geom_smooth() +\n    geom_linerange(aes(ymin = min_bmi, ymax = max_bmi)) +\n    facet_wrap(~sex, ncol = 1) +\n    theme(legend.position = \"none\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}