{
  "hash": "d4be6f3b1051421ec7a4793f518c6ab6",
  "result": {
    "markdown": "---\ntitle: \"Tidy Tuesday Trash\"\n\n---\n\n\n\n## Example of factor analysis with trash data \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.4.4     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.0\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n:::\n\n```{.r .cell-code}\n# library(lavaan)\n\ndf <- read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2024/2024-03-05/trashwheel.csv')\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 998 Columns: 16\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (4): ID, Name, Month, Date\ndbl (12): Dumpster, Year, Weight, Volume, PlasticBottles, Polystyrene, Cigar...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n:::\n\n\nWant to know if we can produce an SEM using lavaan to work out the relative contribution of different types of trash to either volume or weight collected\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nf_1 <- factanal(~ PlasticBottles + Polystyrene + CigaretteButts + GlassBottles + PlasticBags + Wrappers + SportsBalls, data = df, factors = 1)\n\nf_1\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nCall:\nfactanal(x = ~PlasticBottles + Polystyrene + CigaretteButts +     GlassBottles + PlasticBags + Wrappers + SportsBalls, factors = 1,     data = df)\n\nUniquenesses:\nPlasticBottles    Polystyrene CigaretteButts   GlassBottles    PlasticBags \n         0.750          0.355          0.764          0.669          0.174 \n      Wrappers    SportsBalls \n         0.181          0.891 \n\nLoadings:\n               Factor1\nPlasticBottles 0.500  \nPolystyrene    0.803  \nCigaretteButts 0.486  \nGlassBottles   0.575  \nPlasticBags    0.909  \nWrappers       0.905  \nSportsBalls    0.330  \n\n               Factor1\nSS loadings      3.216\nProportion Var   0.459\n\nTest of the hypothesis that 1 factor is sufficient.\nThe chi square statistic is 852.82 on 14 degrees of freedom.\nThe p-value is 5.5e-173 \n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nf_2 <- factanal(~ PlasticBottles + Polystyrene + CigaretteButts + GlassBottles + PlasticBags + Wrappers + SportsBalls, data = df, factors = 2, scores = \"regression\")\n\nf_2\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nCall:\nfactanal(x = ~PlasticBottles + Polystyrene + CigaretteButts +     GlassBottles + PlasticBags + Wrappers + SportsBalls, factors = 2,     data = df, scores = \"regression\")\n\nUniquenesses:\nPlasticBottles    Polystyrene CigaretteButts   GlassBottles    PlasticBags \n         0.761          0.367          0.496          0.005          0.072 \n      Wrappers    SportsBalls \n         0.211          0.864 \n\nLoadings:\n               Factor1 Factor2\nPlasticBottles 0.337   0.354  \nPolystyrene    0.717   0.344  \nCigaretteButts 0.241   0.668  \nGlassBottles   0.228   0.971  \nPlasticBags    0.934   0.236  \nWrappers       0.826   0.327  \nSportsBalls    0.191   0.316  \n\n               Factor1 Factor2\nSS loadings      2.329   1.895\nProportion Var   0.333   0.271\nCumulative Var   0.333   0.603\n\nTest of the hypothesis that 2 factors are sufficient.\nThe chi square statistic is 460.79 on 8 degrees of freedom.\nThe p-value is 1.8e-94 \n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndf2 <- df %>%\n    filter(complete.cases(.)) |>\n    mutate(\n        plastic_dumping_score = f_2$scores[,1],\n        drinking_smoking_score = f_2$scores[,2]\n    )\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndf2 |>\n    mutate(density = Weight / Volume) |>\n    ggplot(aes(x = plastic_dumping_score, y = drinking_smoking_score)) + \n    geom_point(aes(alpha = density)) + \n    facet_wrap(~ Year)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\nThis is a four dimensional plot! \n\nIt looks like, over time, the type of trash collected has changed, and involves less of both plastic-based, and drinking/smoking-based types of trash. \n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}