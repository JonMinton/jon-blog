{
  "hash": "5ac9b0b31d697616d1be5b50b01f0277",
  "result": {
    "markdown": "---\ntitle: \"Tidy Tuesday on Life Expectancy\"\nauthor: \n  - \"Nick Christofides\"\n  - \"Jon Minton\"\n  - \"Sandra Nwobi\"\ndate: \"2023-12-06\"\nmodified: \"2023-12-06\"\ncode-fold: true\nwarning: false\nmessage: false\ncategories: [R, tidy tuesday, Life Expectancy]\n---\n\n\nThis week's Tidy Tuesday compares life expectancy across the globe and is available here:\n\n## Loading the data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(tidytuesdayR)\ndata_url <- \"https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2023/2023-12-05/life_expectancy_different_ages.csv\"\n \ndta <- read_csv(data_url)\n\n# Alternatively\ntuesdata <- tidytuesdayR::tt_load('2023-12-05')\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n\tDownloading file 1 of 3: `life_expectancy.csv`\n\tDownloading file 2 of 3: `life_expectancy_different_ages.csv`\n\tDownloading file 3 of 3: `life_expectancy_female_male.csv`\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nnames(tuesdata)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"life_expectancy\"                \"life_expectancy_different_ages\"\n[3] \"life_expectancy_female_male\"   \n```\n:::\n\n```{.r .cell-code}\nlife_expectancy <- tuesdata$life_expectancy\n\nn_distinct(life_expectancy$Entity)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 261\n```\n:::\n:::\n\n\n## Setting a global plot theme\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntheme_set(theme_minimal())\n```\n:::\n\n\n## Comparing life expectancy across regions\n\n\n::: {.cell}\n\n```{.r .cell-code}\nregions <- life_expectancy %>%\n  filter(str_detect(Entity, \"region\"))\n\nregions %>%\n  ggplot(aes(x = Year, y = LifeExpectancy)) +\n  geom_line(aes(col = Entity)) +\n  theme(legend.position = \"top\") +\n  annotate(geom = \"text\",\n           x = 1960, y = 50,\n           label = \"What happened here?\") +\n  geom_vline(xintercept = 2019, linetype = 2) +\n  annotate(geom = \"text\", x = 2019, y = 75,\n           label = \"Start of COVID pandemic\",\n           hjust = 1)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n## Difference in life expectancy between more and less developed regions\n\n\n::: {.cell}\n\n```{.r .cell-code}\nregions %>%\n  filter(Entity %in% c(\"More developed regions\",\n                       \"Less developed regions\"))  %>%\n  arrange(Year, Entity) %>%\n  group_by(Year) %>%\n  mutate(difference = LifeExpectancy - lag(LifeExpectancy)) %>%\n  filter(!is.na(difference)) %>%\n  ungroup() %>%\n  ggplot(aes(x = Year, y = difference)) +\n  geom_area(alpha = 0.5) +\n  expand_limits(y = 0) +\n  labs(title = \"Difference in life expectancy between more developed and less developed regions\",\n       y = \"Difference in life expectancy (years)\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\nWe look at life expectancy at different ages in three specific countries.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_tidy <-\n  dta |>\n    pivot_longer(\n      cols = LifeExpectancy0:LifeExpectancy80\n    ) |>\n    mutate(\n      starting_age = str_remove(name, \"LifeExpectancy\") %>%\n        as.numeric()\n    ) |>\n    select(-name) |>\n    rename(e_x = value)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_tidy |>\n  filter(\n    Entity %in% c(\n      \"Nigeria\", \"Iran\",\n      \"South Africa\"\n    )\n  ) |>\n  arrange(Year)  |>\n  ggplot(aes(Year, e_x, group = factor(starting_age), colour = factor(starting_age))) +\n  geom_line() +\n  facet_wrap(~Entity)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\nSandra Nwobi, who suggested the three countries above, provides the following summary:\n\n> Of the three developing countries---Iran, South Africa, and Nigeria---Nigeria has a significantly higher zero-age death rate in the late 50s and early 60s. This can be attributed to a number of factors, including socioeconomic instability, political unrest, malnutrition, and limited access to healthcare. Comparing this result to South Africa and Iran, it is comparatively higher. However, there have been noticeable improvements in Nigeria during the 1980s, with a steady increase. Nevertheless, much work needs to be done to combat this in Nigeria, as it performs significantly worse than the other two countries.\\\n>\n> There was a noticeable decline in data in the early 2000s, particularly in South Africa. Health crises like HIV/AIDS, which may have affected people between the ages of 0 and 25, as well as a number of social and economic problems may have contributed to this decline.\\\n>\n> Iran's data indicates consistent growth across all age groups over the years, with the exception of a general decline in 2020 that was likely caused by the COVID-19 virus. Out of the three countries, South Africa is the most affected, maybe as a result of a much older demography compared to Nigeria.\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}