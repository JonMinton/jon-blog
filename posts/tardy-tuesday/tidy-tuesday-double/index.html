<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jon Minton">
<meta name="dcterms.date" content="2024-04-02">

<title>Jon Minton’s Blog - Double Tardy Tuesday</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../../site_libs/bootstrap/bootstrap-dark.min.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="../../../site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="../../../site_libs/plotly-binding-4.10.4/plotly.js"></script>
<script src="../../../site_libs/typedarray-0.1/typedarray.min.js"></script>
<script src="../../../site_libs/jquery-3.5.1/jquery.min.js"></script>
<link href="../../../site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="../../../site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<link href="../../../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="../../../site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


<link rel="stylesheet" href="../../../styles.css">
<meta name="twitter:title" content="Jon Minton’s Blog - Double Tardy Tuesday">
<meta name="twitter:description" content="Mea Culpa">
<meta name="twitter:image" content="https://JonMinton.github.io/jon-blog/posts/tardy-tuesday/tidy-tuesday-double/index_files/figure-html/unnamed-chunk-3-1.png">
<meta name="twitter:site" content="@jonminton">
<meta name="twitter:image-height" content="960">
<meta name="twitter:image-width" content="1344">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Jon Minton’s Blog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../glms.html" rel="" target="">
 <span class="menu-text">Statistical Modelling: Theory and Practice</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../tardy-tuesday.html" rel="" target="">
 <span class="menu-text">Tardy Tuesdays</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../unpop.html" rel="" target="">
 <span class="menu-text">Unpop</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://jonminton.net" rel="" target=""><i class="bi bi-window-fullscreen" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/JonMinton" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/JonMinton" rel="" target=""><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://uk.linkedin.com/in/jon-minton-09480b13a" rel="" target=""><i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Double Tardy Tuesday</h1>
            <p class="subtitle lead">Mea Culpa</p>
                                <div class="quarto-categories">
                <div class="quarto-category">Tidy Tuesday</div>
                <div class="quarto-category">Tardy</div>
                <div class="quarto-category">Data Science</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Jon Minton </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">April 2, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>I’ve been exceptionally tardy updating the Tardy Tuesday blog the last couple of weeks. So there are a couple of weeks worth of code to update with at once. Unlike previous times I’m going to list only myself as the author of this blog, as none of the contributors deserve any blame for my tardiness!</p>
<p>Additionally, the scripts will be presented more ‘as-is’ than on previous occasions, without as much additional discussion or amendments.</p>
</section>
<section id="common-package-dependencies" class="level2">
<h2 class="anchored" data-anchor-id="common-package-dependencies">Common package dependencies</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.0     ✔ tibble    3.2.1
✔ lubridate 1.9.3     ✔ tidyr     1.3.1
✔ purrr     1.0.2     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
</div>
</section>
<section id="mutant-moneyball" class="level2">
<h2 class="anchored" data-anchor-id="mutant-moneyball">Mutant Moneyball</h2>
<p><a href="https://github.com/rfordatascience/tidytuesday/tree/master/data/2024/2024-03-19">This TidyTuesday</a> dataset involved understanding the relationship between the value of old Mavel comics and the appearance of particular characters in those comics. I’m not sure it was a good or bad thing that we didn’t know the names of most of the characters…</p>
<p>The session was led by Brendan, who wrote (with our support) the script below:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>tidytuesdayR<span class="sc">::</span><span class="fu">tt_load</span>(<span class="st">'2024-03-19'</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>--- Compiling #TidyTuesday Information for 2024-03-19 ----</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>--- There is 1 file available ---</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>--- Starting Download ---</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Downloading file 1 of 1: `mutant_moneyball.csv`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>--- Download complete ---</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Available datasets:
    mutant_moneyball 
    </code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>mutant_moneyball <span class="ot">&lt;-</span> tidytuesdayR<span class="sc">::</span><span class="fu">tt_load</span>(<span class="st">'2024-03-19'</span>) <span class="sc">|&gt;</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pluck</span>(<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>--- Compiling #TidyTuesday Information for 2024-03-19 ----</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>--- There is 1 file available ---</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>--- Starting Download ---</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Downloading file 1 of 1: `mutant_moneyball.csv`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>--- Download complete ---</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(mutant_moneyball)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>spc_tbl_ [26 × 45] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
 $ Member                : chr [1:26] "warrenWorthington" "hankMcCoy" "scottSummers" "bobbyDrake" ...
 $ TotalIssues           : num [1:26] 139 119 197 123 164 68 48 190 120 167 ...
 $ TotalIssues60s        : num [1:26] 61 62 63 62 63 8 9 0 0 0 ...
 $ TotalIssues70s        : num [1:26] 35 38 69 35 58 13 13 36 36 36 ...
 $ TotalIssues80s        : num [1:26] 20 9 56 6 14 43 19 121 84 115 ...
 $ TotalIssues90s        : num [1:26] 23 10 9 20 29 4 7 33 0 16 ...
 $ totalIssueCheck       : num [1:26] 139 119 197 123 164 68 48 190 120 167 ...
 $ TotalValue_heritage   : num [1:26] 1108558 957993 1152230 1086749 1132091 ...
 $ TotalValue60s_heritage: num [1:26] 929056 929776 933616 929776 933616 ...
 $ TotalValue70s_heritage: num [1:26] 154585 20705 188635 154585 179899 ...
 $ TotalValue80s_heritage: num [1:26] 23957 6631 29240 1514 16868 ...
 $ TotalValue90s_heritage: num [1:26] 960 881 739 874 1708 ...
 $ TotalValue_ebay       : num [1:26] 27377 24972 29964 26902 29158 ...
 $ TotalValue60s_ebay    : num [1:26] 23335 23377 23420 23377 23420 ...
 $ TotalValue70s_ebay    : num [1:26] 3362 1224 5431 3362 4903 ...
 $ TotalValue80s_ebay    : num [1:26] 583 289 1031 70 665 ...
 $ TotalValue90s_ebay    : num [1:26] 97 82 82 93 170 21 41 334 0 100 ...
 $ 60s_Appearance_Percent: chr [1:26] "96.83%" "98.41%" "100.00%" "98.41%" ...
 $ 70s_Appearance_Percent: chr [1:26] "50.72%" "55.07%" "100.00%" "50.72%" ...
 $ 80s_Appearance_Percent: chr [1:26] "14.60%" "6.57%" "40.88%" "4.38%" ...
 $ 90s_Appearance_Percent: chr [1:26] "51.11%" "22.22%" "20.00%" "44.44%" ...
 $ PPI60s_heritage       : chr [1:26] "$15,230.43 " "$14,996.39 " "$14,819.30 " "$14,996.39 " ...
 $ PPI70s_heritage       : chr [1:26] "$4,416.71 " "$544.87 " "$2,733.84 " "$4,416.71 " ...
 $ PPI80s_heritage       : chr [1:26] "$1,197.85 " "$736.78 " "$522.14 " "$252.33 " ...
 $ PPI90s_heritage       : chr [1:26] "$41.74 " "$88.10 " "$82.11 " "$43.70 " ...
 $ PPI60s_ebay           : chr [1:26] "$382.54 " "$377.05 " "$371.75 " "$377.05 " ...
 $ PPI70s_ebay           : chr [1:26] "$96.06 " "$32.21 " "$78.71 " "$96.06 " ...
 $ PPI80s_ebay           : chr [1:26] "$29.15 " "$32.11 " "$18.41 " "$11.67 " ...
 $ PPI90s_ebay           : chr [1:26] "$4.22 " "$8.20 " "$9.11 " "$4.65 " ...
 $ TotalValue60s_wiz     : chr [1:26] "$7,913.00 " "$7,953.00 " "$7,993.00 " "$7,953.00 " ...
 $ TotalValue70s_wiz     : chr [1:26] "$1,105.00 " "$851.00 " "$1,979.00 " "$1,105.00 " ...
 $ TotalValue80s_wiz     : chr [1:26] "$226.00 " "$89.00 " "$438.00 " "$48.00 " ...
 $ TotalValue90s_wiz     : chr [1:26] "$65.75 " "$38.50 " "$39.25 " "$62.00 " ...
 $ TotalValue60s_oStreet : chr [1:26] "$68,160.00 " "$68,390.00 " "$68,590.00 " "$68,390.00 " ...
 $ TotalValue70s_oStreet : chr [1:26] "$7,360.00 " "$5,260.00 " "$11,675.00 " "$7,360.00 " ...
 $ TotalValue80s_oStreet : chr [1:26] "$975.00 " "$431.00 " "$1,427.00 " "$137.00 " ...
 $ TotalValue90s_oStreet : chr [1:26] "$123.00 " "$81.00 " "$74.00 " "$108.00 " ...
 $ PPI60s_wiz            : chr [1:26] "$129.72 " "$128.27 " "$126.87 " "$128.27 " ...
 $ PPI70s_wiz            : chr [1:26] "$31.57 " "$22.39 " "$28.68 " "$31.57 " ...
 $ PPI80s_wiz            : chr [1:26] "$11.30 " "$9.89 " "$7.82 " "$8.00 " ...
 $ PPI90s_wiz            : chr [1:26] "$2.86 " "$3.85 " "$4.36 " "$3.10 " ...
 $ PPI60s_oStreet        : chr [1:26] "$1,117.38 " "$1,103.06 " "$1,088.73 " "$1,103.06 " ...
 $ PPI70s_oStreet        : chr [1:26] "$210.29 " "$138.42 " "$169.20 " "$210.29 " ...
 $ PPI80s_oStreet        : chr [1:26] "$48.75 " "$47.89 " "$25.48 " "$22.83 " ...
 $ PPI90s_oStreet        : chr [1:26] "$5.35 " "$8.10 " "$8.22 " "$5.40 " ...
 - attr(*, "spec")=
  .. cols(
  ..   Member = col_character(),
  ..   TotalIssues = col_double(),
  ..   TotalIssues60s = col_double(),
  ..   TotalIssues70s = col_double(),
  ..   TotalIssues80s = col_double(),
  ..   TotalIssues90s = col_double(),
  ..   totalIssueCheck = col_double(),
  ..   TotalValue_heritage = col_double(),
  ..   TotalValue60s_heritage = col_double(),
  ..   TotalValue70s_heritage = col_double(),
  ..   TotalValue80s_heritage = col_double(),
  ..   TotalValue90s_heritage = col_double(),
  ..   TotalValue_ebay = col_double(),
  ..   TotalValue60s_ebay = col_double(),
  ..   TotalValue70s_ebay = col_double(),
  ..   TotalValue80s_ebay = col_double(),
  ..   TotalValue90s_ebay = col_double(),
  ..   `60s_Appearance_Percent` = col_character(),
  ..   `70s_Appearance_Percent` = col_character(),
  ..   `80s_Appearance_Percent` = col_character(),
  ..   `90s_Appearance_Percent` = col_character(),
  ..   PPI60s_heritage = col_character(),
  ..   PPI70s_heritage = col_character(),
  ..   PPI80s_heritage = col_character(),
  ..   PPI90s_heritage = col_character(),
  ..   PPI60s_ebay = col_character(),
  ..   PPI70s_ebay = col_character(),
  ..   PPI80s_ebay = col_character(),
  ..   PPI90s_ebay = col_character(),
  ..   TotalValue60s_wiz = col_character(),
  ..   TotalValue70s_wiz = col_character(),
  ..   TotalValue80s_wiz = col_character(),
  ..   TotalValue90s_wiz = col_character(),
  ..   TotalValue60s_oStreet = col_character(),
  ..   TotalValue70s_oStreet = col_character(),
  ..   TotalValue80s_oStreet = col_character(),
  ..   TotalValue90s_oStreet = col_character(),
  ..   PPI60s_wiz = col_character(),
  ..   PPI70s_wiz = col_character(),
  ..   PPI80s_wiz = col_character(),
  ..   PPI90s_wiz = col_character(),
  ..   PPI60s_oStreet = col_character(),
  ..   PPI70s_oStreet = col_character(),
  ..   PPI80s_oStreet = col_character(),
  ..   PPI90s_oStreet = col_character()
  .. )
 - attr(*, "problems")=&lt;externalptr&gt; </code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># filter by totalIssueCheck == TotalIssues for missing issues, then remove both</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>mutant_moneyball <span class="sc">|&gt;</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(totalIssueCheck <span class="sc">!=</span> TotalIssues) <span class="sc">|&gt;</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># split TotalIssues and Member into issues data</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>appearances <span class="ot">&lt;-</span> mutant_moneyball <span class="sc">|&gt;</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Member, <span class="fu">contains</span>(<span class="st">"ssues"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="sc">!</span>Member) <span class="sc">|&gt;</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">first =</span> <span class="fu">str_to_title</span>(<span class="fu">str_extract</span>(Member, <span class="st">"^[[:lower:]]*"</span>))) <span class="sc">|&gt;</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">last =</span> <span class="fu">str_remove</span>(Member, <span class="st">"^[[:lower:]]*"</span> )) <span class="sc">|&gt;</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Member =</span> <span class="fu">paste</span>(first, last), <span class="at">.keep=</span><span class="st">"unused"</span>) </span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>appearances <span class="sc">|&gt;</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(name <span class="sc">==</span> <span class="st">"TotalIssues"</span>) <span class="sc">|&gt;</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(value))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 26 × 3
   Member             name        value
   &lt;chr&gt;              &lt;chr&gt;       &lt;dbl&gt;
 1 Scott Summers      TotalIssues   197
 2 Ororo Munroe       TotalIssues   190
 3 Peter Rasputin     TotalIssues   169
 4 Charles Xavier     TotalIssues   169
 5 Logan Howlett      TotalIssues   167
 6 Jean Grey          TotalIssues   164
 7 Warren Worthington TotalIssues   139
 8 Bobby Drake        TotalIssues   123
 9 Kurt Wagner        TotalIssues   120
10 Hank McCoy         TotalIssues   119
# ℹ 16 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>best_xm <span class="ot">&lt;-</span> appearances <span class="sc">|&gt;</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(value, <span class="at">n=</span><span class="dv">10</span>) <span class="sc">|&gt;</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(Member)</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>appearances <span class="sc">|&gt;</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">first =</span> <span class="fu">str_to_title</span>(<span class="fu">str_extract</span>(Member, <span class="st">"^[[:lower:]]*"</span>))) <span class="sc">|&gt;</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">last =</span> <span class="fu">str_remove</span>(Member, <span class="st">"^[[:lower:]]*"</span> )) <span class="sc">|&gt;</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Member =</span> <span class="fu">paste</span>(first, last), <span class="at">.keep=</span><span class="st">"unused"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 130 × 3
   Member                name           value
   &lt;chr&gt;                 &lt;chr&gt;          &lt;dbl&gt;
 1 " Warren Worthington" TotalIssues      139
 2 " Warren Worthington" TotalIssues60s    61
 3 " Warren Worthington" TotalIssues70s    35
 4 " Warren Worthington" TotalIssues80s    20
 5 " Warren Worthington" TotalIssues90s    23
 6 " Hank McCoy"         TotalIssues      119
 7 " Hank McCoy"         TotalIssues60s    62
 8 " Hank McCoy"         TotalIssues70s    38
 9 " Hank McCoy"         TotalIssues80s     9
10 " Hank McCoy"         TotalIssues90s    10
# ℹ 120 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>dates <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>start, <span class="sc">~</span>end, <span class="sc">~</span>decade,</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1963</span>, <span class="dv">1969</span>, <span class="dv">60</span>,</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1970</span>, <span class="dv">1979</span>, <span class="dv">70</span>,</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1980</span>, <span class="dv">1989</span>, <span class="dv">80</span>,</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1990</span>, <span class="dv">1992</span>, <span class="dv">90</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>plot <span class="ot">&lt;-</span> appearances <span class="sc">|&gt;</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">decade =</span> <span class="fu">as.numeric</span>(<span class="fu">str_extract</span>(name, <span class="st">"</span><span class="sc">\\</span><span class="st">d{2}"</span>))) <span class="sc">|&gt;</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(decade)) <span class="sc">|&gt;</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(dates) <span class="sc">|&gt;</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year_range =</span> <span class="dv">1</span> <span class="sc">+</span> end <span class="sc">-</span> start) <span class="sc">|&gt;</span></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rate =</span> value <span class="sc">/</span> year_range) <span class="sc">|&gt;</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(<span class="fu">last_col</span>()) <span class="sc">|&gt;</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Member <span class="sc">%in%</span> best_xm) <span class="sc">|&gt;</span></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> start, <span class="at">y =</span> rate, <span class="at">colour =</span> Member)) <span class="sc">+</span></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Joining with `by = join_by(decade)`</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>plotly<span class="sc">::</span><span class="fu">ggplotly</span>(plot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-49470fe6602810a9a92c" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-49470fe6602810a9a92c">{"x":{"data":[{"x":[1963,1970,1980,1990],"y":[8.8571428571428577,3.5,0.59999999999999998,6.666666666666667],"text":["start: 1963<br />rate:  8.857143<br />Member: Bobby Drake","start: 1970<br />rate:  3.500000<br />Member: Bobby Drake","start: 1980<br />rate:  0.600000<br />Member: Bobby Drake","start: 1990<br />rate:  6.666667<br />Member: Bobby Drake"],"type":"scatter","mode":"lines+markers","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)","dash":"solid"},"hoveron":"points","name":"Bobby Drake","legendgroup":"Bobby Drake","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"frame":null},{"x":[1963,1970,1980,1990],"y":[5.5714285714285712,4.5999999999999996,6.0999999999999996,7.666666666666667],"text":["start: 1963<br />rate:  5.571429<br />Member: Charles Xavier","start: 1970<br />rate:  4.600000<br />Member: Charles Xavier","start: 1980<br />rate:  6.100000<br />Member: Charles Xavier","start: 1990<br />rate:  7.666667<br />Member: Charles Xavier"],"type":"scatter","mode":"lines+markers","line":{"width":1.8897637795275593,"color":"rgba(211,146,0,1)","dash":"solid"},"hoveron":"points","name":"Charles Xavier","legendgroup":"Charles Xavier","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(211,146,0,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(211,146,0,1)"}},"frame":null},{"x":[1963,1970,1980,1990],"y":[9,5.7999999999999998,1.3999999999999999,9.6666666666666661],"text":["start: 1963<br />rate:  9.000000<br />Member: Jean Grey","start: 1970<br />rate:  5.800000<br />Member: Jean Grey","start: 1980<br />rate:  1.400000<br />Member: Jean Grey","start: 1990<br />rate:  9.666667<br />Member: Jean Grey"],"type":"scatter","mode":"lines+markers","line":{"width":1.8897637795275593,"color":"rgba(147,170,0,1)","dash":"solid"},"hoveron":"points","name":"Jean Grey","legendgroup":"Jean Grey","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(147,170,0,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(147,170,0,1)"}},"frame":null},{"x":[1963,1970,1980,1990],"y":[0,3.6000000000000001,8.4000000000000004,0],"text":["start: 1963<br />rate:  0.000000<br />Member: Kurt Wagner","start: 1970<br />rate:  3.600000<br />Member: Kurt Wagner","start: 1980<br />rate:  8.400000<br />Member: Kurt Wagner","start: 1990<br />rate:  0.000000<br />Member: Kurt Wagner"],"type":"scatter","mode":"lines+markers","line":{"width":1.8897637795275593,"color":"rgba(0,186,56,1)","dash":"solid"},"hoveron":"points","name":"Kurt Wagner","legendgroup":"Kurt Wagner","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(0,186,56,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,186,56,1)"}},"frame":null},{"x":[1963,1970,1980,1990],"y":[0,3.6000000000000001,11.5,5.333333333333333],"text":["start: 1963<br />rate:  0.000000<br />Member: Logan Howlett","start: 1970<br />rate:  3.600000<br />Member: Logan Howlett","start: 1980<br />rate: 11.500000<br />Member: Logan Howlett","start: 1990<br />rate:  5.333333<br />Member: Logan Howlett"],"type":"scatter","mode":"lines+markers","line":{"width":1.8897637795275593,"color":"rgba(0,193,159,1)","dash":"solid"},"hoveron":"points","name":"Logan Howlett","legendgroup":"Logan Howlett","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(0,193,159,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,193,159,1)"}},"frame":null},{"x":[1963,1970,1980,1990],"y":[0,3.6000000000000001,12.1,11],"text":["start: 1963<br />rate:  0.000000<br />Member: Ororo Munroe","start: 1970<br />rate:  3.600000<br />Member: Ororo Munroe","start: 1980<br />rate: 12.100000<br />Member: Ororo Munroe","start: 1990<br />rate: 11.000000<br />Member: Ororo Munroe"],"type":"scatter","mode":"lines+markers","line":{"width":1.8897637795275593,"color":"rgba(0,185,227,1)","dash":"solid"},"hoveron":"points","name":"Ororo Munroe","legendgroup":"Ororo Munroe","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(0,185,227,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,185,227,1)"}},"frame":null},{"x":[1963,1970,1980,1990],"y":[0,3.6000000000000001,11,7.666666666666667],"text":["start: 1963<br />rate:  0.000000<br />Member: Peter Rasputin","start: 1970<br />rate:  3.600000<br />Member: Peter Rasputin","start: 1980<br />rate: 11.000000<br />Member: Peter Rasputin","start: 1990<br />rate:  7.666667<br />Member: Peter Rasputin"],"type":"scatter","mode":"lines+markers","line":{"width":1.8897637795275593,"color":"rgba(97,156,255,1)","dash":"solid"},"hoveron":"points","name":"Peter Rasputin","legendgroup":"Peter Rasputin","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(97,156,255,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(97,156,255,1)"}},"frame":null},{"x":[1963,1970,1980,1990],"y":[9,6.9000000000000004,5.5999999999999996,3],"text":["start: 1963<br />rate:  9.000000<br />Member: Scott Summers","start: 1970<br />rate:  6.900000<br />Member: Scott Summers","start: 1980<br />rate:  5.600000<br />Member: Scott Summers","start: 1990<br />rate:  3.000000<br />Member: Scott Summers"],"type":"scatter","mode":"lines+markers","line":{"width":1.8897637795275593,"color":"rgba(219,114,251,1)","dash":"solid"},"hoveron":"points","name":"Scott Summers","legendgroup":"Scott Summers","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(219,114,251,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(219,114,251,1)"}},"frame":null},{"x":[1963,1970,1980,1990],"y":[8.7142857142857135,3.5,2,7.666666666666667],"text":["start: 1963<br />rate:  8.714286<br />Member: Warren Worthington","start: 1970<br />rate:  3.500000<br />Member: Warren Worthington","start: 1980<br />rate:  2.000000<br />Member: Warren Worthington","start: 1990<br />rate:  7.666667<br />Member: Warren Worthington"],"type":"scatter","mode":"lines+markers","line":{"width":1.8897637795275593,"color":"rgba(255,97,195,1)","dash":"solid"},"hoveron":"points","name":"Warren Worthington","legendgroup":"Warren Worthington","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(255,97,195,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(255,97,195,1)"}},"frame":null}],"layout":{"margin":{"t":26.228310502283108,"r":7.3059360730593621,"b":40.182648401826498,"l":48.949771689497723},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[1961.6500000000001,1991.3499999999999],"tickmode":"array","ticktext":["1970","1980","1990"],"tickvals":[1970,1980,1990],"categoryorder":"array","categoryarray":["1970","1980","1990"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"start","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.60499999999999998,12.705],"tickmode":"array","ticktext":["0.0","2.5","5.0","7.5","10.0","12.5"],"tickvals":[0,2.5,5,7.5,10,12.5],"categoryorder":"array","categoryarray":["0.0","2.5","5.0","7.5","10.0","12.5"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"rate","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"title":{"text":"Member","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"3861279ae8a6":{"x":{},"y":{},"colour":{},"type":"scatter"},"38612b1ffe9a":{"x":{},"y":{},"colour":{}}},"cur_data":"3861279ae8a6","visdat":{"3861279ae8a6":["function (y) ","x"],"38612b1ffe9a":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<section id="recollections" class="level3">
<h3 class="anchored" data-anchor-id="recollections">Recollections</h3>
<p>For this session we focused more on regex than perhaps we thought we would, with a particular focus on how to produce nicely readable names for different characters. We also focused on producing metrics like appearances per year, given that some of the time periods were full decades, but others were just of a few years within the decade.</p>
</section>
</section>
<section id="ncaa-mens-march-madness" class="level2">
<h2 class="anchored" data-anchor-id="ncaa-mens-march-madness">NCAA Men’s March Madness</h2>
<p>This session was based around <a href="https://github.com/rfordatascience/tidytuesday/tree/master/data/2024/2024-03-26">data from a basketball competition</a>. It had information both on how well different teams performed against each other, and also how well various members of the public thought they would perform, meaning it can be used to assess how well expectations match with reality.</p>
<p>This particular session was led by Nic, who supplied the code below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">is.na</span>(utils<span class="sc">::</span><span class="fu">packageVersion</span>(<span class="st">"pacman"</span>))){</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">install.packages</span>(<span class="st">"pacman"</span>)</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pacman)</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="fu">p_load</span>(tidytuesdayR)</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="do">### Download last tuesday's data</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>tt_data <span class="ot">&lt;-</span> <span class="fu">tt_load</span>(<span class="st">'2024-03-26'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>--- Compiling #TidyTuesday Information for 2024-03-26 ----</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>--- There are 2 files available ---</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>--- Starting Download ---</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Downloading file 1 of 2: `team-results.csv`
    Downloading file 2 of 2: `public-picks.csv`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>--- Download complete ---</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>tt_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Available datasets:
    team-results 
    public-picks 
    </code></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Assign the datasets to our global environment</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="fu">list2env</span>(tt_data, <span class="fu">globalenv</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;environment: R_GlobalEnv&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load packages -----------------------------------------------------------</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="fu">p_load</span>(tidyverse, <span class="co"># The tidyverse</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>       cheapr, <span class="co"># Cheap (fast &amp; efficient) functions</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>       cppdoubles, <span class="co"># Floating-point comparisons</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>       timeplyr, <span class="co"># Date-Time manipulation</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>       tidytext, <span class="co"># Text manipulation</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>       phsmethods, phsstyles) <span class="co"># PHS functions</span></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Exploratory -------------------------------------------------------------</span></span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a><span class="fu">overview</span>(<span class="st">`</span><span class="at">team-results</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>obs: 236 
cols: 20 

----- Numeric -----
          col   class n_missing p_complete n_unique   mean   p0   p25   p50
1      TEAMID numeric         0          1      236 124.33    1 63.75 123.5
2        PAKE numeric         0          1       75  -0.01 -6.7  -0.8  -0.2
3    PAKERANK numeric         0          1       75 114.53    1    56   118
4        PASE numeric         0          1       79      0 -8.5  -0.9 -0.15
5    PASERANK numeric         0          1       79 114.78    1    59   111
6       GAMES numeric         0          1       38   8.01    1     2     4
7           W numeric         0          1       31      4    0     0     1
8           L numeric         0          1       15      4    1     1     3
9  WINPERCENT numeric         0          1       55   0.26    0     0  0.25
10        R64 numeric         0          1       15   4.07    1     1     3
11        R32 numeric         0          1       15   2.03    0     0     1
12        S16 numeric         0          1       10   1.02    0     0     0
13         E8 numeric         0          1        8   0.51    0     0     0
14         F4 numeric         0          1        6   0.25    0     0     0
15         F2 numeric         0          1        5   0.13    0     0     0
16      CHAMP numeric         0          1        4   0.06    0     0     0
17       TOP2 numeric         0          1       11   0.51    0     0     0
      p75 p100   iqr    sd
1  185.25  245 121.5 70.66
2     0.5   12   1.3  2.21
3     175  236   119 68.46
4     0.5 10.6   1.4  2.35
5     175  236   116 68.58
6       9   53     7 10.26
7       4   40     4  7.38
8       6   15     5  3.31
9     0.5  0.8   0.5  0.26
10      6   15     5  3.44
11      3   15     3  3.01
12      1    9     1  2.06
13      0    7     0  1.28
14      0    5     0  0.78
15      0    4     0  0.51
16      0    3     0  0.35
17      0   12     0  1.56

----- Categorical -----
           col     class n_missing p_complete n_unique n_levels
1         TEAM character         0          1      236       NA
2    F4PERCENT character         0          1      119       NA
3 CHAMPPERCENT character         0          1       72       NA
                min    max
1 Abilene Christian   Yale
2             0.00% 98.80%
3             0.00%  9.10%</code></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">overview</span>(<span class="st">`</span><span class="at">public-picks</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>obs: 64 
cols: 9 

----- Numeric -----
     col   class n_missing p_complete n_unique    mean   p0     p25    p50
1   YEAR numeric         0          1        1    2024 2024    2024   2024
2 TEAMNO numeric         0          1       64 1045.39 1012 1028.75 1045.5
      p75 p100  iqr    sd
1    2024 2024    0     0
2 1062.25 1079 33.5 19.71

----- Categorical -----
     col     class n_missing p_complete n_unique n_levels   min    max
1   TEAM character         0          1       64       NA Akron   Yale
2    R64 character         0          1       64       NA 1.50% 98.41%
3    R32 character         0          1       62       NA 0.67% 93.59%
4    S16 character         0          1       60       NA 0.33% 80.22%
5     E8 character         0          1       54       NA 0.17%  8.37%
6     F4 character         0          1       42       NA 0.07%  9.99%
7 FINALS character         0          1       37       NA 0.03%  9.27%</code></pre>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="st">`</span><span class="at">public-picks</span><span class="st">`</span> <span class="sc">|&gt;</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(R64<span class="sc">:</span>FINALS) <span class="sc">|&gt;</span> </span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(YEAR, TEAMNO) <span class="sc">|&gt;</span> </span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">stage =</span> <span class="fu">row_number</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">perc =</span> <span class="fu">as.numeric</span>(<span class="fu">str_remove</span>(value, <span class="st">"%"</span>)),</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">perc =</span> perc <span class="sc">/</span> <span class="dv">100</span>) <span class="sc">%&gt;%</span></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> stage, <span class="at">y =</span> perc)) <span class="sc">+</span> </span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">group =</span> <span class="fu">paste</span>(YEAR, TEAM)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>  <span class="co"># geom_col()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>top_predicted_teams <span class="ot">&lt;-</span> <span class="st">`</span><span class="at">public-picks</span><span class="st">`</span> <span class="sc">|&gt;</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(R64<span class="sc">:</span>FINALS) <span class="sc">|&gt;</span> </span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(YEAR, TEAMNO) <span class="sc">|&gt;</span> </span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">stage =</span> <span class="fu">row_number</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">perc =</span> <span class="fu">as.numeric</span>(<span class="fu">str_remove</span>(value, <span class="st">"%"</span>)),</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">perc =</span> perc <span class="sc">/</span> <span class="dv">100</span>) <span class="sc">%&gt;%</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(stage <span class="sc">==</span> <span class="dv">6</span>) <span class="sc">%&gt;%</span></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(perc)) <span class="sc">%&gt;%</span></span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a><span class="st">`</span><span class="at">team-results</span><span class="st">`</span> <span class="sc">%&gt;%</span></span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(CHAMP)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 2
  CHAMP     n
  &lt;dbl&gt; &lt;int&gt;
1     0   227
2     1     4
3     2     4
4     3     1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="st">`</span><span class="at">team-results</span><span class="st">`</span> <span class="sc">%&gt;%</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(CHAMP)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 2
  CHAMP     n
  &lt;dbl&gt; &lt;int&gt;
1     0   227
2     1     4
3     2     4
4     3     1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="st">`</span><span class="at">team-results</span><span class="st">`</span> <span class="sc">%&gt;%</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(F2 <span class="sc">&gt;=</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 × 20
  TEAMID TEAM    PAKE PAKERANK  PASE PASERANK GAMES     W     L WINPERCENT   R64
   &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt; &lt;dbl&gt;
1     24 Butler   7          4   8.7        4    26    17     9      0.654     9
2     40 Conne…   8.6        2  10.6        1    29    23     6      0.793     9
3     50 Duke     2         24   0         78    46    34    12      0.739    14
4     68 Gonza…   3.1       18   3.8       14    47    32    15      0.681    15
5     86 Kansas   4.2       13  -1.8      205    53    40    13      0.755    15
6     90 Kentu…   6.9        6   8.5        5    43    32    11      0.744    12
7    114 Michi…   7          4   7.6        6    35    24    11      0.686    11
8    135 North…  12          1   9.8        2    50    39    11      0.78     13
9    228 Villa…   4.8        9   4         11    40    29    11      0.725    13
# ℹ 9 more variables: R32 &lt;dbl&gt;, S16 &lt;dbl&gt;, E8 &lt;dbl&gt;, F4 &lt;dbl&gt;, F2 &lt;dbl&gt;,
#   CHAMP &lt;dbl&gt;, TOP2 &lt;dbl&gt;, F4PERCENT &lt;chr&gt;, CHAMPPERCENT &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>top_predicted_teams <span class="sc">%&gt;%</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(<span class="st">`</span><span class="at">team-results</span><span class="st">`</span>, <span class="at">by =</span> <span class="st">"TEAM"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 26
   YEAR TEAMNO TEAM         name  value stage   perc TEAMID  PAKE PAKERANK  PASE
  &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;        &lt;chr&gt; &lt;chr&gt; &lt;int&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;
1  2024   1067 Connecticut  FINA… 34.9…     6 0.349      40   8.6        2  10.6
2  2024   1038 North Carol… FINA… 12.1…     6 0.121     135  12          1   9.8
3  2024   1033 Purdue       FINA… 10.2…     6 0.102     167  -4.4      232  -4.4
4  2024   1056 Houston      FINA… 9.27%     6 0.0927     76   0         76   2.1
5  2024   1053 Iowa St.     FINA… 4.78%     6 0.0478     83  -2        209  -1.5
# ℹ 15 more variables: PASERANK &lt;dbl&gt;, GAMES &lt;dbl&gt;, W &lt;dbl&gt;, L &lt;dbl&gt;,
#   WINPERCENT &lt;dbl&gt;, R64 &lt;dbl&gt;, R32 &lt;dbl&gt;, S16 &lt;dbl&gt;, E8 &lt;dbl&gt;, F4 &lt;dbl&gt;,
#   F2 &lt;dbl&gt;, CHAMP &lt;dbl&gt;, TOP2 &lt;dbl&gt;, F4PERCENT &lt;chr&gt;, CHAMPPERCENT &lt;chr&gt;</code></pre>
</div>
</div>
<section id="shoutouts" class="level3">
<h3 class="anchored" data-anchor-id="shoutouts">Shoutouts</h3>
<p>Please check out Nic’s <a href="https://cran.r-project.org/web/packages/timeplyr/index.html">timeplyr package</a>, which is now on CRAN and was masterfully presented at a <a href="http://edinbr.org/edinbr/2024/01/11/January-meeting.html">previous EdinbR R users’ group meeting</a>.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'alternate';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://utteranc.es/client.js" repo="JonMinton/BlogComments" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->



</body></html>