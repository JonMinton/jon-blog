!function i(r,s,d){function c(t,e){if(!s[t]){if(!r[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}var o=s[t]={exports:{}};r[t][0].call(o.exports,function(e){return c(r[t][1][e]||e)},o,o.exports,i,r,s,d)}return s[t].exports}for(var l="function"==typeof require&&require,e=0;e<d.length;e++)c(d[e]);return c}({1:[function(e,t,n){var a=e("./lib/replace"),o=e("./lib/getSlotPlaceholder").getSlotPlaceholder,i=e("./lib/getSlotPlaceholder").getClickTrackingParamWithSlotId;t.exports.replace=a,t.exports.getSlotPlaceholder=o,t.exports.getClickTrackingParamWithSlotId=i},{"./lib/getSlotPlaceholder":2,"./lib/replace":4}],2:[function(e,t,n){var a=e("./globals"),o="data-val";function i(e){if("string"!=typeof e||""===e)return"";var t=a.getDocument().getElementById("ape_"+e+"_placement_ClickTracking");if(!(t&&t.hasAttribute&&"function"==typeof t.hasAttribute&&t.hasAttribute(o)&&t.getAttribute&&"function"==typeof t.getAttribute))return"";var n=t.getAttribute(o);return"string"!=typeof n?"":n}t.exports.getSlotPlaceholder=function(e,t,n){return i([e,n,t].join("_"))},t.exports.getClickTrackingParamWithSlotId=i},{"./globals":3}],3:[function(e,t,n){t.exports.getDocument=function(){return document}},{}],4:[function(e,t,n){var u=new RegExp(/((&#[0-9]{2};)|(&#[0-9]{3};)|(&#[0-9]{4};)|(&[a-z]{2};)|(&[a-z]{3};)|(&[a-z]{4};)|(&[a-z]{5};)|(&[a-z]{6};)|(&[a-z]{7};)|(%[a-fA-F0-9]{2})|(\W))pd_rd_plhdr(=|%3D)t((&#[0-9]{2};)|(&#[0-9]{3};)|(&#[0-9]{4};)|(&[a-z]{2};)|(&[a-z]{3};)|(&[a-z]{4};)|(&[a-z]{5};)|(&[a-z]{6};)|(&[a-z]{7};)|(%[a-fA-F0-9]{2})|(\W))/),p="$1",f="$14";t.exports=function(e,t){var n=t,a=e;if("string"!=typeof e||"&pd_rd_plhdr=t"===e||""===e.trim())return n;(a=a.replace(/&amp;/g,"&")).startsWith("&")&&(a=a.replace(/^&+/,"")),a.endsWith("&")&&(a=a.replace(/&+$/,""));try{var o,i=0;do{if(i++,!(o=n.match(u)))break;var r=o[1],s=o[14],d=o[13],c=r.startsWith("&")&&r.endsWith(";")||s.startsWith("&")&&s.endsWith(";"),l=r.startsWith("%")&&s.startsWith("%")&&"%3D"===d;n=c?n.replace(u,p+a.replace(/&/g,"&amp;")+f):l?n.replace(u,p+encodeURIComponent(a)+f):n.replace(u,p+a+f)}while(o&&i<10)}catch(e){return t}return n}},{}],5:[function(e,t,n){var a=e("./ajaxRequest");t.exports.Tracer=function(e,t){return this.traceId=e,this.adStartTime=t,this.storedTrace={},this.logTrace=function(e,t){if(void 0!==this.traceId){var n,a=(new Date).getTime();this.storedTrace.hasOwnProperty(e)||(this.storedTrace[e]=[]),(n=t===Object(t)?Object.assign&&"function"==typeof Object.assign?Object.assign({},t):JSON.parse(JSON.stringify(t)):(n='{ "'+e+'":"'+t+'"}',JSON.parse(n))).timeStamp=a,n.timeSinceAdStart=a-this.adStartTime,this.storedTrace[e].push(n)}},this.sendTrace=function(){var t=function(){console.log("failed to send request to /gp/adbarplus")};if(!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(this.storedTrace)){var e="/gp/adbarplus?traceId="+this.traceId+"&systemName=browser";for(var n in a.sendAjaxRequest(e,"POST",JSON.stringify(this.storedTrace),{"Content-Type":"application/x-www-form-urlencoded"},function(e){4===e.readyState&&200!==e.status&&t()},t),this.storedTrace)this.storedTrace.hasOwnProperty(n)&&delete this.storedTrace[n]}},this.bindSendTraceToPageOnLoad=function(){var e=function(e,t){return function(){return e.apply(t)}},t=function(){this.sendTrace()},n=function(){this.sendTrace(),window.setInterval(e(t,this),3e3)};"loading"!==document.readyState?e(n,this)():window.addEventListener?window.addEventListener("load",e(n,this)):document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&e(n,this)()})},void 0!==e&&this.bindSendTraceToPageOnLoad(),{traceId:this.traceId,adStartTime:this.adStartTime,storedTrace:this.storedTrace,allData:this.allData,logTrace:this.logTrace,sendTrace:this.sendTrace}}},{"./ajaxRequest":6}],6:[function(e,t,n){t.exports.sendAjaxRequest=function(e,t,n,a,o,i){try{var r=null;if(window.XMLHttpRequest?r=new XMLHttpRequest:i(),r){if(r.onreadystatechange=function(){o(r)},r.open(t,e,!0),null!==a)for(var s in a)r.setRequestHeader(s,a[s]);r.send(n)}else i()}catch(e){i()}}},{}],7:[function(e,t,n){var p=e("../host/metrics/counters"),f=e("../host/metrics/events");t.exports.checkCache=function(e,t,a,o,n,i){var r=p.CACHE_COUNTERS,s=f.CACHE_EVENTS;if("undefined"!=typeof performance&&void 0!==performance.getEntriesByType){var d=performance.getEntriesByType("resource");if(void 0!==d&&Array.isArray(d)&&!(d.length<1)&&void 0!==d[0].duration){var c=void 0!==d[0].transferSize?function(e,t,n){0===e.transferSize?(l(t+"cached"),i(n+"cached",a,o)):(l(t+"uncached"),i(n+"uncached",a,o))}:function(e,t,n){e.duration<20?(l(t+"fastload"),i(n+"fastload",a,o)):(l(t+"slowload"),i(n+"slowload",a,o))};u(e,r.SF_LIBRARY,s.SF_LIBRARY),u(t,r.SF_HTML,s.SF_HTML)}}function l(e){n(a,o,e,1)}function u(e,t,n){if(e)for(var a=0;a<d.length;a++){var o=d[a];if(o.name&&-1!==o.name.indexOf(e))return void c(o,t,n)}}}},{"../host/metrics/counters":18,"../host/metrics/events":21}],8:[function(e,t,n){var a=e("@amzn/apejs-click-tracking");t.exports.getSlotPlaceholder=function(e){if(!("pageType"in e&&"subPageType"in e&&"slotName"in e))return"";try{return a.getSlotPlaceholder(e.pageType,e.subPageType,e.slotName)}catch(e){return""}}},{"@amzn/apejs-click-tracking":1}],9:[function(e,u,t){
/*
    @license
    Underscore.js 1.8.3
    http://underscorejs.org
    (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
    Underscore may be freely distributed under the MIT license.
*/
var a=function(){return window.P&&window.P.AUI_BUILD_DATE};u.exports.throttle=function(n,a,o){var i,r,s,d=null,c=0;o||(o={});var l=function(){c=!1===o.leading?0:u.exports.now(),d=null,s=n.apply(i,r),d||(i=r=null)};return function(){var e=u.exports.now();c||!1!==o.leading||(c=e);var t=a-(e-c);return i=this,r=arguments,t<=0||a<t?(d&&(clearTimeout(d),d=null),c=e,s=n.apply(i,r),d||(i=r=null)):d||!1===o.trailing||(d=setTimeout(l,t)),s}},u.exports.now=function(){return Date.now?Date.now():(new Date).getTime()},u.exports.addListener=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):window.attachEvent&&e.attachEvent("on"+t,n)},u.exports.removeListener=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},u.exports.addWindowListener=function(e,t){u.exports.addListener(window,e,t)},u.exports.removeWindowListener=function(e,t){window.removeEventListener?window.removeEventListener(e,t,!1):window.detachEvent&&window.detachEvent("on"+e,t)},u.exports.ensureMessageListener=function(e){u.exports.removeWindowListener("message",e),u.exports.addWindowListener("message",e)},u.exports.decodeBase64=function(e){var t,n,a,o,i,r,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d="",c=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<e.length;)t=s.indexOf(e.charAt(c++))<<2|(o=s.indexOf(e.charAt(c++)))>>4,n=(15&o)<<4|(i=s.indexOf(e.charAt(c++)))>>2,a=(3&i)<<6|(r=s.indexOf(e.charAt(c++))),d+=String.fromCharCode(t),64!=i&&(d+=String.fromCharCode(n)),64!=r&&(d+=String.fromCharCode(a));return d=function(e){for(var t="",n=0,a=0,o=0,i=0;n<e.length;)(a=e.charCodeAt(n))<128?(t+=String.fromCharCode(a),n++):191<a&&a<224?(o=e.charCodeAt(n+1),t+=String.fromCharCode((31&a)<<6|63&o),n+=2):(o=e.charCodeAt(n+1),i=e.charCodeAt(n+2),t+=String.fromCharCode((15&a)<<12|(63&o)<<6|63&i),n+=3);return t}(d)},u.exports.createScript=function(e,t,n,a,o){if(!document.getElementById(n)){var i=document.createElement("script");return i.async=!0,i.setAttribute("crossorigin","anonymous"),i.src=e,i.type=t,i.id=n,i.onerror=a,i.onload=o,i}},u.exports.isAUIAvailable=a,u.exports.safeFunctionWrapper=function(e,t,n){return a()&&"function"==typeof window.P.guardError?P.guardError("APE-SafeFrame",e):function(){try{e.apply(this,arguments)}catch(e){"function"==typeof t&&n&&t(n,e)}}},u.exports.getCookie=function(e){var t=e+"=";try{for(var n=decodeURIComponent(document.cookie).split(";"),a=0;a<n.length;a++){for(var o=n[a];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(t))return o.substring(t.length,o.length)}}catch(e){}return""},u.exports.disableCookieAccess=function(){try{Object&&Object.defineProperty&&"function"==typeof Object.defineProperty?Object.defineProperty(document,"cookie",{get:function(){return""},set:function(){}}):(document.__defineGetter__("cookie",function(){return""}),document.__defineSetter__("cookie",function(){}))}catch(e){}},u.exports.setObjectStyles=function(e,t){if(e&&t)for(var n in t)e.style[n]=t[n];return e},u.exports.ABP_STATUS={1:"Enabled",0:"NotEnabled","-1":"Unknown"},u.exports.hasHostname=function(e){var t="";return e&&(t=-1<e.indexOf("//")?e.split("/")[2]:e.split("/")[0]),0!=t.length},u.exports.isVideo=function(e){return"V"===e}},{}],10:[function(s,e,t){
/**
 * @license
 * Copyright (c) 2016, Amazon.com
 * APE SafeFrame v1.50.d327519 -- 2022-02-22T20:30:21+0000
 */
!function(k,_){var a=s("./messenger/msgHandler"),t=s("./metrics/counters"),i=s("./metrics/events"),d=s("../components/cacheChecker"),R=s("../components/adBarTracer"),c=s("./components/adFeedback"),e=s("./metrics/csm"),n=s("./metrics/csa"),l=s("./components/advertisementText"),N=s("../components/clickTrackingHelper"),u=s("./components/videoOrchestrator"),p=s("./hostAPI"),O=a.util,D=a.messenger,F=a.logError,f=D.appendErrorDetails,o=a.loadScript,z=e.sendCsmLatencyMetric,W=e.sendCsmCounter,B=n.initCsaLatencyPlugin,V=n.markCsaLatencyMetric,U=n.logCsaEvent,m=n.addCsaEntity,H=n.initCsaEvents,j=e.addCsmTag,G=a.fireViewableLatencyMetrics,q=a.hasClass,J=a.createIframeWithAttributes,X=a.logCounter,Y=a.collapseSlot,Q=a.setResizePlacementStyle,K=a.resizeSafeFrameAd,$=a.delayLoad,Z=a.sizeValidator,ee=a.checkAgainstAllowlist;function r(){if(k.MAsf)k.MAsf.loadAds();else{k.MAsf={version:"1.50.d327519"},H(),W(null,null,t.SF_VERSION_COUNTERS.VERSION+":"+k.MAsf.version,1),U(i.SF_VERSION_EVENTS.VERSION+k.MAsf.version);var g="text/x-dacx-safeframe",e=a.SF_DOMAIN,r=e+"/images/S/apesafeframe/ape/sf/mobile/msf-1.50.d327519.html",s=e+"/images/S/apesafeframe/ape/sf/mobile/msfVideo-1.50.d327519.html",h="data-arid",w="ape_postMessageUnsupported",v="ape_postMessageSupported",y=t.AD_LOAD_COUNTERS,b=i.AD_LOAD_EVENTS,n=t.MESSENGER_COUNTERS,o={},S={},E={};D.supportedCommands={sendAdBarTrace:function(e,t){e.options.arid in E&&E[e.options.arid].logTrace(t.field,t.traceInfo)},logAPIInvocation:function(e,t){W(null,null,n.API+t.apiName,1),W(e.options.slot,e.options.placementId,n.API+t.apiName,1),e.options.arid in E&&E[e.options.arid].logTrace("apiCalls",t)},resizeSafeFrameAd:function(e,t){O.addWindowListener("resize",o[e.options.arid].defaultResizeSafeFrameHandler),K(e.options.arid,e.options.size.width,e.options.size.height,e.options.maxAdWidth,D,S)},setResizePlacementStyle:function(e,t){O.addWindowListener("resize",o[e.options.arid].defaultSetResizePlacementStyle),Q(e.options.arid,S,e.options.resizePlacementStyle)},changeSize:function(e,t){var n=e.options.allowedSizes;if(void 0===e.options.allowChangeSize||e.options.allowChangeSize)if(ee(t,n,Z))e.iframe.style.height=t.height,e.iframe.style.width=t.width,e.slot.style.height=t.height,e.slot.style.width=t.width,O.removeWindowListener("resize",o[e.options.arid].defaultResizeSafeFrameHandler);else{var a="Size is not allowlisted: "+t.width+" x "+t.height+f(e.options.arid);F(a)}},startPixelTracking:p.startPixelTracking,startPixelTrackingForLegacyImpression:p.startPixelTrackingForLegacyImpression,collapseSlot:function(e,t){Y(S[e.options.arid].wrapperDivId),Y(S[e.options.arid].auiCardDeckId)},openInExternalBrowser:function(t,n){t.options.isAUIAvailable&&(n.successCallback=O.safeFunctionWrapper(function(){D.sendMessageToAd(t.options.arid,"mash.openInExternalBrowser.update",{})}),n.failCallback=O.safeFunctionWrapper(function(e){D.sendMessageToAd(t.options.arid,"mash.openInExternalBrowser.update",{value:e})}),n.failCallback=O.safeFunctionWrapper(function(){}),P.when("mash").execute(function(e){e.openInExternalBrowser(n)}))},launchIntentURL:function(t,n){if(t.options.isAUIAvailable){if(void 0===n.url||void 0===n.fallbackUrl||!/^https:\/\/primenow\.amazon\.(com|ca|com\.mx|com\.br|co\.uk|de|fr|it|es|in|ae|sa|nl|se|co\.jp|com\.au|com\.tr)\//.test(n.url))return;var a=O.safeFunctionWrapper(function(){D.sendMessageToAd(t.options.arid,"mash.launchIntentURL.update",{})}),o=O.safeFunctionWrapper(function(e){k.location=n.fallbackUrl,D.sendMessageToAd(t.options.arid,"mash.launchIntentURL.update",{errorMsg:e})});P.when("mash").execute(function(e){e.launchIntentURL({url:n.url,successCallback:a,failCallback:o})})}},advertisementText:function(e,t){var n=_.getElementById(S[e.options.arid].wrapperDivId);l.appendAdvertisementTextToDiv(n,e.options.arid,e.options.advertisementTextHTMLContentEncoded,e.options.advertisementTextOnTop,E)},loadAdFeedback:function(e,t){var n=D.adMap[e.options.arid].iframe;e.options.adCreativeMetaData=t,c.appendAdFeedbackLinkToIframe(n,e.options,E)},logError:function(e,t){F(t.message+f(e.options.arid)+": "+e.options.slot,t.error)},logCsaEvent:function(e,t){U(t.metricName,e.options.slot,e.options.placementId)},addCsaEntity:function(e,t){m(t)},customMessage:function(e,t){D.customMessage(t.key,t.body,e.options.allowlistedCustomMessageEvents,e.options.slot,e.options.placementId)},sendCsmLatencyMetric:function(e,t){z(t.metric,e.options.slot,e.options.placementId,t.metricMsg,t.timestamp)},markCsaLatencyMetric:function(e,t){V(t.metric,t.timestamp)},countMetric:function(e,t){t.isGlobal?W(null,null,t.metricMsg,t.value):W(e.options.slot,e.options.placementId,t.metricMsg,t.value)},addCsmTag:function(e,t){t.isGlobal?j(t.tag,null,null,t.msg):j(t.tag,e.options.slot,e.options.placementId,t.msg)},fireViewableLatencyMetrics:function(e,t){G(e.options.arid,e.options.slot,e.options.placementId,t.adLoadedTimestamp)},enableViewabilityTracker:function(e,t){D.updateViewability(e.options.arid);var n=O.throttle(D.updateViewability,20);if(T(e.options.arid,e.options.slot,"viewabilityTracker",function(){n(e.options.arid)}),O.addWindowListener("scroll",o[e.options.arid].viewabilityTracker),O.addWindowListener("resize",o[e.options.arid].viewabilityTracker),O.addListener(_,"visibilitychange",o[e.options.arid].viewabilityTracker),a.isInterSectionObserverSupported()){new IntersectionObserver(function(){D.updateViewability(e.options.arid)},{threshold:[0,.5,1]}).observe(e.slot)}},enableNoInventoryViewabilityTrackerAndInvokeFallback:function(e){D.takeSnapshotOfSlotPosition(e.options.arid),D.updateNoInventoryViewability(e.options.arid),D.sendMessageToAd(e.options.arid,"handleFallbackBehavior",{});var t=O.throttle(D.updateNoInventoryViewability,20);T(e.options.arid,e.options.slot,"noInventoryViewabilityTracker",function(){t(e.options.arid)}),O.addWindowListener("scroll",o[e.options.arid].noInventoryViewabilityTracker),O.addWindowListener("resize",o[e.options.arid].noInventoryViewabilityTracker),O.addListener(_,"visibilitychange",o[e.options.arid].noInventoryViewabilityTracker)},onPageEvent:function(e,t){$(t.eventName,O.safeFunctionWrapper(function(){D.sendMessageToAd(e.options.arid,"onPageEvent.update",{})},F,"Failed to send message to Ad"))},getAdInfo:function(e,t){var n=e.options.slot.split("_")[1];n&&(_.mobileAds=_.mobileAds||{},_.mobileAds[n]=t.mobileAdsInfo)},requestVideoAutoplay:function(e,t){u.requestVideoAutoplay(e,t,D)},releaseVideoAutoplay:function(){u.releaseVideoAutoplay()},haveVideoAutoplayPermission:function(e){u.haveVideoAutoplayPermission(e)}},O.addWindowListener("message",D.receiveMessage),k.MAsf.registerCustomMessageListener=D.registerCustomMessageListener,k.MAsf.sendCustomMessage=D.sendCustomMessage,k.MAsf.loadAds=function(){var e,t,n,a,o,i=0,r=null;for(e=_.getElementsByClassName(g);r=e[i++];){var s=null,d=null;if("DIV"===r.tagName&&q(r,g))try{(s=JSON.parse(r.getAttribute("data-ad-details"))).fallbackStaticAdClickUrl&&(O.hasHostname(s.fallbackStaticAdClickUrl)||(s.fallbackStaticAdClickUrl=k.location.protocol+"//"+k.location.host+s.fallbackStaticAdClickUrl));var c="ape_"+s.slot+"_placement",l=_.getElementById(c);if(!D.adMap[s.arid]&&l&&l.innerHTML){l.innerHTML="",r.removeAttribute(h);var u="ape_"+s.slot+"_text-wrapper";_.getElementById(u)&&_.getElementById(u).remove()}if(B(l.parentNode),r.getAttribute(h))continue;if(n=s.slot,t=_.getElementById("ape_"+n+"_userData"))try{d=JSON.parse(t.getAttribute("data-user-data"))}catch(e){d=null}s.arid=s.arid||Math.random().toString(16).slice(2),E[s.arid]=new R.Tracer(s.traceId,k[s.slotName]&&k[s.slotName].adStartTime||0),E[s.arid].logTrace("safeFrameInput",s);var p={};p.caches=k.caches?k.caches:null,p.plugins=_.plugins?_.plugins:null,p.cookies=_.cookie?_.cookie:null,p.userAgents=navigator.userAgent?navigator.userAgent:null,E[s.arid].logTrace("browserData",p),r.setAttribute(h,s.arid),s.hostDomain=location.protocol+"//"+location.host,s.userAgent=k.top.navigator.userAgent,s.isAUIAvailable=O.isAUIAvailable(),s.cookie=M(s.allowedCookies),s.aPageStart=k.aPageStart,s.adStartTime=k[s.slotName]&&k[s.slotName].adStartTime||0,s.userConnectionInfo=C(d),L(s);var f="d3l3lkinz3f56t.cloudfront.net,g-ecx.images-amazon.com,z-ecx.images-amazon.com,images-na.ssl-images-amazon.com,g-ec4.images-amazon.com,images-cn.ssl-images-amazon.com".split(",");s.allowedDomains="object"==typeof s.allowedDomains&&0<=s.allowedDomains.length?s.allowedDomains.concat(f):f,T(s.arid,n,"defaultResizeSafeFrameHandler",A(s)),T(s.arid,n,"defaultSetResizePlacementStyle",x(s)),a=s.arid,o=n,S[a]={slotId:o,wrapperDivId:"ape_"+o+"_wrapper",placementDivId:"ape_"+o+"_placement",iframeId:"ape_"+o+"_iframe",textDivWrapperId:"ape_"+o+"_text-wrapper",textDivId:"ape_"+o+"_text",auiCardDeckId:"ape_"+o+"_aui_cardDeck"},z("af",n,s.placementId),V("clickToATF"),W(n,s.placementId,y.START,1),U(b.START,s.slot,s.placementId),"clickTracking"in s&&""===s.clickTracking&&(s.clickTracking=N.getSlotPlaceholder(s));var m={};if(m.hostDomain=s.hostDomain,m.allowedSizes=s.allowedSizes,m.allowedDomains=s.allowedDomains,m.productAdsUrl=s.productAdsUrl,m.parentLocation=s.parentLocation,m.queryParams=s.queryParams,m.aPageStart=s.aPageStart,m.adStartTime=s.adStartTime,m.safeFrameSrc=s.safeFrameSrc,m.abpStatus=s.abpStatus,"function"!=typeof k.postMessage){X(w,1),Y(r.getAttribute("id")),m.postMessage="postMessageNotSupported";continue}X(v,1),$(s.loadAfter,I(s),s.extraDelay,r),m.postMessage="postMessageSupported",m.loadAfter=s.loadAfter,E[s.arid].logTrace("additionalInitilizationParams",m)}catch(e){s=null,F("Error parsing sf tag",e)}}},k.MAsf.loadAds(),O.addWindowListener("resize",function(){k.MAsf.sendCustomMessage("resize",{height:k.innerHeight,width:k.innerWidth})})}function T(e,t,n,a){o[e]=o[e]||{},o[e][n]=O.safeFunctionWrapper(a,F,"Error within ad handler "+n+": "+t)}function A(e){return function(){K(e.arid,e.size.width,e.size.height,e.maxAdWidth,D,S)}}function x(e){return function(){Q(e.arid,S,e.resizePlacementStyle)}}function I(a){return O.safeFunctionWrapper(function(){var e={callbackOccurred:!0};e.loadAfter=a.loadAfter,E[a.arid].logTrace("pageCallBack",e),W(a.slot,a.placementId,y.CALLBACK,1),U(b.CALLBACK,a.slot,a.placementId);var t=S[a.arid].placementDivId;if(t){var n=_.getElementById(t);n&&!n.innerHTML&&(function(t){try{var e=_.getElementById(S[t.arid].placementDivId),n={},a=S[t.arid].iframeId,o=O.isVideo(t.mediaType)?s:r,i=J(t,a,o);i.onload=function(){d.checkCache(t.MAsfUrl,r,t.slot,t.placementId,W,U)},e.appendChild(i),z("cf",t.slot,t.placementId),V("criticalFeature"),W(t.slot,t.placementId,y.IFRAME_CREATED,1),U(b.IFRAME_CREATED,t.slot,t.placementId),D.adMap[t.arid]={slot:e,iframe:i,options:t},n.id=i.id,n.src=i.src,n.scrolling=i.scrolling,n.height=i.height,n.width=i.width,n.className=i.className,n.styleCssText=i.style.cssText,n.sandbox=i.sandbox,E[t.arid].logTrace("createSafeFrame",n)}catch(e){F("Error creating safeFrame: "+t.slot,e),E[t.arid]&&E[t.arid].logTrace("createSafeFrame",{error:{message:"errorCreatingSafeFrame",ex:e}})}}(a),a.expParams&&a.expParams.enableMobileFeedback&&c.appendSponsoredLabelToIframe(D.adMap[a.arid].iframe,a,E))}},F,"Error in callback to create Safeframe.")}function C(e){var t=e&&e.userContext,n={mobileConnectionType:t&&t.mobileConnectionType},a=t&&t.connectionType;if(a)n.connectionType=a.toLowerCase();else{var o=k.navigator,i=o&&(o.connection||o.mozConnection||o.webkitConnection);n.connectionType=i&&i.type||"unknown"}return n}function M(e){var t,n,a,o,i="";try{if(Array.isArray(e))for(var r=0;r<e.length;r++){var s=O.getCookie(e[r]);void 0!==s&&""!==s&&("amzn-app-ctxt"===e[r]&&(o=void 0,t=/^([.\d]*\s*)({.*})$/.exec(s),n=t[1],a=JSON.parse(t[2]),(o={}).os=a.os,o.av=a.av,s=n+JSON.stringify(o)),i+=e[r]+"="+s+"; ")}}catch(e){F("Error parsing page cookies",e)}return i}function L(n){n.isAUIAvailable&&P.now("devmea:controller").execute(function(e){if(void 0!==e){var t={chosenPrediction:e.getPrediction(),headPrediction:e.getHeadPrediction(),serverPrediction:e.getServerPrediction()};n.toofanPredictionInfo=t}})}}O.safeFunctionWrapper(function(){"undefined"==typeof JSON?o("https://images-na.ssl-images-amazon.com/images/G/01/da/js/json3.min._V308851628_.js",r):r()},F,"Error initializing safeFrame")()}(window,document)},{"../components/adBarTracer":5,"../components/cacheChecker":7,"../components/clickTrackingHelper":8,"./components/adFeedback":11,"./components/advertisementText":12,"./components/videoOrchestrator":14,"./hostAPI":16,"./messenger/msgHandler":17,"./metrics/counters":18,"./metrics/csa":19,"./metrics/csm":20,"./metrics/events":21}],11:[function(e,t,n){var p=e("../metrics/csm").sendCsmCounter,f=e("../metrics/csa").logCsaEvent,m=e("../metrics/counters").FEEDBACK_COUNTERS,g=e("../metrics/events").FEEDBACK_EVENTS,h=e("../../components/ajaxRequest"),s=e("../../components/util").setObjectStyles,i=e("../../components/util").decodeBase64;function w(e,t){if(!e||!t.adFeedbackInfo.boolFeedback||e.isFeedbackLoaded)return null;var n=e.parentNode,a=t.feedbackDivStyle,o=t.adFeedbackInfo.adFeedbackOnTop;return n.getElementsByTagName("div")[0]||v("div",{id:n.id+"_Feedback"},a,n,o?n.firstChild:null)}function v(e,t,n,a,o){var i=document.createElement(e);for(var r in t)i.setAttribute(r,t[r]);return s(i,n),a.insertBefore(i,o),i}t.exports.appendSponsoredLabelToIframe=function(e,t,n){var a=w(e,t);if(a){var o=a.getElementsByTagName("div")[0]||v("div",{},t.advertisementStyle,a);t.adFeedbackInfo.sponsoredText?o.innerHTML=i(t.adFeedbackInfo.sponsoredText):o.innerHTML=t.adFeedbackInfo.slugText,n[t.arid].logTrace("adFeedBack",{renderSponsoredLabel:!0}),p(t.slot,t.placementId,m.LABEL_RENDER,1),f(g.LABEL_RENDER,t.slot,t.placementId)}},t.exports.appendAdFeedbackLinkToIframe=function(e,o,i){var r=w(e,o);if(r){e.isFeedbackLoaded=!0;var t=e.parentNode,s=o.placementId,n=o.adFeedbackInfo.endPoint,a=o.feedbackDivStyle,d={adPlacementMetaData:o.adPlacementMetaData,adCreativeMetaData:o.adCreativeMetaData},c={};c.isFeedbackLoaded=e.isFeedbackLoaded,c.slot=t,c.placementId=s,c.endPoint=n,c.feedbackDivStyle=a,c.adFeedbackParams=d;var l,u=n&&n.length?window.location.protocol+"//"+window.location.hostname+n+"?pl="+(l=d,encodeURIComponent(JSON.stringify(l))):n;c.requestUrl=u,i[o.arid].logTrace("adFeedBack",{adFeedbackRequest:c}),u&&(p(o.slot,s,m.REQUEST,1),f(g.REQUEST,o.slot,s),h.sendAjaxRequest(u,"GET",null,null,function(e){var t={feedbackResponseStarted:!0,feedBackResponseReturned:!1};if(4===e.readyState){if(200===e.status)try{var n=e.responseText,a=JSON.parse(n);(t.response=a)&&"ok"===a.status&&("html"in a&&a.html&&(r.innerHTML=a.html),"script"in a&&a.script&&((r.getElementsByTagName("script")[0]||v("script",{},{},r)).innerHTML=a.script),p(o.slot,s,m.SUCCESS,1),f(g.SUCCESS,o.slot,s),t.feedBackResponseReturned=!0)}catch(e){p(o.slot,o.placementId,m.ERROR,1),f(g.ERROR,o.slot,o.placementId)}i[o.arid].logTrace("adFeedBack",{adFeedBackResponse:t})}},function(){}))}}},{"../../components/ajaxRequest":6,"../../components/util":9,"../metrics/counters":18,"../metrics/csa":19,"../metrics/csm":20,"../metrics/events":21}],12:[function(e,t,n){var r=e("../../components/util");t.exports.appendAdvertisementTextToDiv=function(e,t,n,a,o){var i={};i.advertisementTextHTMLContentEncoded=n||"undefined",i.wrapperDivId=e,o[t].logTrace("loadAdvertisementText",i),n&&e.insertAdjacentHTML(a?"beforebegin":"afterend",r.decodeBase64(n))}},{"../../components/util":9}],13:[function(e,t,n){var o=e("../../components/util"),i={};t.exports.subscribe=function(t,n,a){t&&t.id&&!i[t.id]&&o.isAUIAvailable()&&P.when("gw-video-orchestrator").execute(function(e){e.subscribe(t,n,a),i[t.id]=!0})},t.exports.elect=function(t){t&&o.isAUIAvailable()&&P.when("gw-video-orchestrator").execute(function(e){e.elect(t)})},t.exports.unelect=function(){o.isAUIAvailable()&&P.when("gw-video-orchestrator").execute(function(e){e.elect()})}},{"../../components/util":9}],14:[function(e,t,n){var i=e("./hpVideoOrchestrator"),r=e("./viewability"),s=null;t.exports.requestVideoAutoplay=function(t,e,n){var a,o=function(e){n.sendCustomMessageToAd(t.options.arid,"videoAutoplayResponse",e)};t.options.expParams&&t.options.expParams.noVideoAutoplay?o(!1):(a=t.options.pageType)&&"gateway"===a.toLowerCase()?i.subscribe(t.iframe,o,e):s===t.options.arid?o(!0):null===s&&function(e){for(var t=document.getElementsByTagName("video"),n=0;n<t.length;++n)if(!t[n].paused&&r.canBeInSameViewport(e,t[n]))return!1;return!0}(t.iframe)?(s=t.options.arid,o(!0)):o(!1)},t.exports.releaseVideoAutoplay=function(){i.unelect(),s=null},t.exports.haveVideoAutoplayPermission=function(e){i.elect(e.iframe),s=e.options.arid}},{"./hpVideoOrchestrator":13,"./viewability":15}],15:[function(e,c,t){function d(e,t,n){var a=0;return"visible"!==document.visibilityState?a:(a=0<e?n-e:0<t?Math.min(t,n):0,Math.min(a,t-e))}function r(){try{var e={};return e.t=window.screenY?window.screenY:window.screenTop,e.l=window.screenX?window.screenX:window.screenLeft,e.w=c.exports.windowWidth(),e.h=c.exports.windowHeight(),e.b=e.t+e.h,e.r=e.l+e.w,e}catch(e){return null}}function s(e,t){try{var n={},a=l(e,t),o=function(e){try{var t={},n=c.exports.windowWidth(),a=c.exports.windowHeight(),o=Math.max(0,d(e.t,e.b,a)),i=Math.max(0,d(e.l,e.r,n)),r=o*i,s=e.h*Math.min(e.w,c.exports.windowWidth());return t.xiv=Number(Math.min(1,i/e.w).toFixed(2)),t.yiv=Number(Math.min(1,o/e.h).toFixed(2)),t.iv=Number(Math.min(1,Math.max(0,r/s)).toFixed(2)),t}catch(e){return null}}(a);return n.t=a.t,n.l=a.l,n.r=a.r,n.b=a.b,n.w=a.w,n.h=a.h,n.z=a.z,n.xiv=o.xiv,n.yiv=o.yiv,n.iv=o.iv,n}catch(e){return null}}function l(e,t){try{var n={},a=t||e.getBoundingClientRect();return n.t=a.top,n.l=a.left,n.r=a.right,n.b=a.bottom,n.w=a.width||n.r-n.l,n.h=a.height||n.b-n.t,n.z=e?Number(window.getComputedStyle(e,null).zIndex):NaN,n}catch(e){return null}}function u(e,t){try{var n={},a=t||e.getBoundingClientRect();return n.t=a.top,n.l=a.left,n.r=c.exports.windowWidth()-a.right,n.b=c.exports.windowHeight()-a.bottom,n.xs=Math.max(document.body.scrollWidth,document.documentElement.scrollWidth)>c.exports.windowWidth()?1:0,n.yx=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)>c.exports.windowHeight()?1:0,n}catch(e){return null}}c.exports.findVerticalPositionReached=function(){try{return window.scrollY+c.exports.windowHeight()}catch(e){return null}},c.exports.findDistanceFromViewport=function(e){try{return e.getBoundingClientRect().top-c.exports.windowHeight()}catch(e){return null}},c.exports.getViewableInfo=function(e){var t={};if(t.atf=function(e){if(!e)return"unknown";var t=function(e){try{var t=l(e,null),n=c.exports.windowHeight(),a=c.exports.windowWidth(),o=document.body.getBoundingClientRect(),i=Math.max(0,Math.min(o.left+a,t.r)-t.l),r=Math.max(0,Math.min(o.top+n,t.b)-t.t),s=i*r/(t.h*Math.min(t.w,a)),d=Number(Math.min(1,Math.max(0,s)).toFixed(2));return d}catch(e){return null}}(e);{if(null==t)return"unknown";if(.5<=t)return!0}return!1}(e),!e)return t;var n=r(),a=s(e),o=u(e);return n&&a&&o&&(t.geom={},t.geom.win=n,t.geom.self=a,t.geom.exp=o,t.payload={},t.payload.wh=n.h,t.payload.ww=n.w,t.payload.sx=window.scrollX,t.payload.sy=window.scrollY,t.payload.ah=a.h,t.payload.aw=a.w,t.payload.top=a.t,t.payload.left=a.l),t},c.exports.takeSnapshotOfSlotPosition=function(e){try{return{initialBoundingRect:e.getBoundingClientRect(),adHeight:e.offsetHeight,adWidth:e.offsetWidth,originalScrollX:window.scrollX,originalScrollY:window.scrollY}}catch(e){return null}},c.exports.getNoInventoryViewabilityData=function(e){var t={},n=function(e){try{var t=e.initialBoundingRect,n=t.top-(window.scrollY-e.originalScrollY),a=n+e.adHeight,o=t.left-(window.scrollX-e.originalScrollX),i=o+e.adWidth;return{top:n,bottom:a,left:o,right:i,width:e.adWidth,height:e.adHeight}}catch(e){return null}}(e),a=r(),o=s(null,n),i=u(null,n);return a&&o&&i?(t.geom={},t.geom.win=a,t.geom.self=o,t.geom.exp=i,t.payload={},t.payload.wh=a.h,t.payload.ww=a.w,t.payload.sx=window.scrollX,t.payload.sy=window.scrollY,t.payload.ah=o.h,t.payload.aw=o.w,t.payload.top=o.t,t.payload.left=o.l,t):null},c.exports.windowHeight=function(){return window.innerHeight||document.documentElement.clientHeight},c.exports.windowWidth=function(){return window.innerWidth||document.documentElement.clientWidth},c.exports.canBeInSameViewport=function(e,t){var n=l(e),a=l(t),o=c.exports.windowWidth(),i=c.exports.windowHeight();return n&&a&&(Math.abs(n.t-a.b)<i||Math.abs(n.b-a.t)<i)&&(Math.abs(n.l-a.r)<o||Math.abs(n.r-a.l)<o)}},{}],16:[function(e,t,n){var a=e("./messenger/msgHandler"),o=a.messenger,i=a.logError;t.exports.startPixelTracking=function(e,t){o.startPixelTracking(e.options.arid,function(){try{o.sendMessageToAd(e.options.arid,"fireImpression",t),t.isNoInventory?o.supportedCommands.enableNoInventoryViewabilityTrackerAndInvokeFallback(e):o.supportedCommands.enableViewabilityTracker(e)}catch(e){i("Error firing pixels. data: "+JSON.stringify(t))}})},t.exports.startPixelTrackingForLegacyImpression=function(e,t){o.startPixelTracking(e.options.arid,function(){try{o.sendMessageToAd(e.options.arid,"fireMetricsForLegacyImpression",{})}catch(e){i("Error firing legacy impression metrics")}})}},{"./messenger/msgHandler":17}],17:[function(e,t,n){var S=e("../components/viewability"),f=e("../../components/util"),a=e("../metrics/csm"),o=e("../metrics/csa"),i=e("../metrics/counters"),r=i.CUSTOM_MESSAGE_COUNTERS,m=i.PIXEL_CONDITIONS,s=a.sendCsmLatencyMetric,E=a.sendCsmCounter,d=o.markCsaLatencyMetric,c={ERROR:"ERROR",WARN:"WARN",FATAL:"FATAL"},l=u();function T(e,t){var n=t||new Error(e);E("",null,"safeFrameError",1),window.sfLogErrors&&(window.ueLogError?window.ueLogError(n,{logLevel:c.ERROR,attribution:"APE-safeframe",message:e+" "}):"undefined"!=typeof console&&console.error&&console.error(e,n))}function u(){var e=window.location.hostname.split(".").pop(),t="na";return/^(com|ca|mx|br)$/.test(e)?t="na":/^(uk|de|fr|it|es|in|ae|sa|nl|tr|se)$/.test(e)?t="eu":/^(jp|au)$/.test(e)?t="fe":/^(cn)$/.test(e)&&(t="cn"),"https://images-"+t+".ssl-images-amazon.com"}function g(e){return e.replace(/^.{1,5}:\/\/|^\/\//,"")}function h(){return"IntersectionObserver"in window&&"IntersectionObserverEntry"in window}function A(e){return!e||x(e)||2<(t=e).length&&"px"===t.substring(t.length-2)?e:e+"px";var t}function x(e){return 1<e.length&&"%"===e.charAt(e.length-1)}function p(e,t,n,a){var o=!1,i=function(){a(n,e)&&(t(),o=!0)},r=f.safeFunctionWrapper(f.throttle(function(){i(),o&&(f.removeWindowListener("scroll",i),f.removeWindowListener("resize",i))},20));f.addWindowListener("scroll",r),f.addWindowListener("resize",r)}t.exports.util=f,t.exports.viewability=S,t.exports.messenger=new function(e,t,n){var u=this;this.adMap=e||{},this.supportedCommands=t||{},this.msgListeners=n||{};var p=function(e){var t=u.adMap,n=t[e].options;if(t==={}||n==={})return null;var a="ape_"+n.slot+"_iframe";return t[e].iframe&&(t[e].iframe=t[e].iframe&&t[e].iframe.innerHTML?t[e].iframe:document.getElementById(a)),t[e].iframe};this.sendMessageToAd=function(e,t,n){var a=p(e),o=a?a.contentWindow:null;if(o){var i={command:t,data:n};i=JSON.stringify(i),o.postMessage(i,"*")}},this.receiveMessage=function(t){var e=u.adMap,n=u.supportedCommands;if(e!=={}){var a,o,i,r,s;try{if(t.data&&t.data.message&&t.data.message.id&&-1<t.data.message.id.toLowerCase().indexOf("mash"))throw"Received Mash message";o=e[(a=JSON.parse(t.data)).arid]}catch(e){return}try{if(s=t,!(r=o)||!r.options||g(s.origin)!==g(l)||"object"!=typeof a.data||!n.hasOwnProperty(a.command))throw"Invalid Message: "+JSON.stringify(t.data);var d=n[a.command];d&&(o.options.debug&&"undefined"!=typeof console&&console.log(t),d(o,a.data))}catch(e){i="Problem with message: "+t.data,void 0!==a&&(i+=u.appendErrorDetails(a.arid)),T(i,e)}}},this.appendErrorDetails=function(e){var t=u.adMap;if(t==={})return"";var n="";if(void 0!==t[e]){var a=t[e].options;void 0!==a.aanResponse&&(n=" Ad Details: "+JSON.stringify(a.aanResponse))}return n},this.customMessage=function(e,t,n,a,o){var i=u.msgListeners;try{"undefined"!==n&&Array.isArray(n)&&(-1<n.indexOf(e)&&i[e]?(E(null,null,r.ALLOWLISTED+":"+e,1),i[e](t)):-1===n.indexOf(e)?(E(null,null,r.NOT_ALLOWLISTED,1),E(a,o,r.NOT_ALLOWLISTED,1)):T("Unrecognized custom message key: "+e))}catch(e){T("Custom Message Error",e)}},this.registerCustomMessageListener=function(e,t,n){var a=!1,o=u.msgListeners;try{!o[e]||"function"!=typeof o[e]||n?(o[e]=t,a=!0):T("Duplicate Key",new Error("Custom message listener already exists for key: "+e))}catch(e){T("Error registering custom message listener",e)}return a},this.sendCustomMessage=function(e,t){var n=u.adMap,a={key:e,data:t};for(var o in n)u.sendMessageToAd(o,"customMessage",a)},this.sendCustomMessageToAd=function(e,t,n){var a={key:t,data:n};u.sendMessageToAd(e,"customMessage",a)},this.takeSnapshotOfSlotPosition=function(e){var t=u.adMap,n=t&&t[e]&&t[e].options;if(t&&t!=={}&&n&&n!=={}){var a=p(e);u.adMap[e].options.slotSnapshot=S.takeSnapshotOfSlotPosition(a)}},this.startPixelTracking=function(e,t){var n,a,o,i="prerender"!==document.visibilityState,r=p(e),s=!!((n=r).offsetWidth||n.offsetHeight||n.getClientRects().length),d=u.adMap&&u.adMap[e]&&u.adMap[e].options;!i&&d&&E(d.slot,d.placementId,m.PAGE_PRERENDER,1),!s&&d&&E(d.slot,d.placementId,m.AD_MISSING,1);var c=function(){return!(!i||!s||(t(),o&&f.removeListener(document,"visibilitychange",o),a&&h()&&a.unobserve(r),0))};if(!c()){var l={root:document.documentElement};h()&&(a=new IntersectionObserver(function(e,t){try{1===e.length&&(e[0].isIntersecting?(s=!0,c()):s=!1)}catch(e){T("Error executing intersectionObserver callback")}},l)).observe(r),o=function(){try{"prerender"!==document.visibilityState?(i=!0,c()):i=!1}catch(e){T("Error executing pageVisibilityHandler callback")}},f.addListener(document,"visibilitychange",o)}},this.updateViewability=function(e){var t=u.adMap,n=t&&t[e]&&t[e].options;if(t&&t!=={}&&n&&n!=={}){var a=p(e),o=t[e].options.viewabilityStandards,i=S.getViewableInfo(a);null!==i&&(i.viewabilityStandards=o,u.sendMessageToAd(e,"updateViewability",i))}},this.updateNoInventoryViewability=function(e){var t=u.adMap,n=t&&t[e]&&t[e].options,a=n&&n.slotSnapshot;if(t&&t!=={}&&n&&n!=={}&&a){var o=n.viewabilityStandards,i=S.getNoInventoryViewabilityData(a);null!==i&&(i.viewabilityStandards=o,u.sendMessageToAd(e,"updateViewability",i))}}},t.exports.logError=T,t.exports.SF_DOMAIN=l,t.exports.loadScript=function(e,t){var n=document.createElement("script");n.src=e,n.setAttribute("crossorigin","anonymous"),n.onload=n.onreadystatechange=function(){n.readyState&&"loaded"!==n.readyState&&"complete"!==n.readyState||(n.onload=n.onreadystatechange=null,t&&"function"==typeof t&&t())},n.onerror=function(e){return T("Error loading script",e),!1},(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(n)},t.exports.fireViewableLatencyMetrics=function(e,t,n,a){window.apeViewableLatencyTrackers&&window.apeViewableLatencyTrackers[e]&&window.apeViewableLatencyTrackers[e].valid&&(window.apeViewableLatencyTrackers[e].loaded=!0,window.apeViewableLatencyTrackers[e].viewed&&(s("ld",t,n,"viewablelatency",a),d("viewablelatency:loaded",a),E(t,n,"htmlviewed:loaded",1)))},t.exports.hasClass=function(e,t){var n=new RegExp("(^|\\s)"+t+"(\\s|$)"),a=e.className;return a&&n.test(a)},t.exports.createIframeWithAttributes=function(e,t,n){var a=document.createElement("iframe");return a.name=JSON.stringify(e),a.id=t,a.src=n,a.height=A(e.size.height)||"250px",a.width=A(e.size.width)||"300px",a.className=e.iframeClass||"",a.setAttribute("frameborder","0"),a.setAttribute("marginheight","0"),a.setAttribute("marginwidth","0"),a.setAttribute("scrolling","no"),a.setAttribute("allowtransparency","true"),a.setAttribute("data-arid",e.arid),a.style.cssText=e.iframeExtraStyle||"",a.sandbox="allow-scripts allow-popups allow-popups-to-escape-sandbox allow-same-origin",/(Chrome|Safari|AppleWebKit|Amazon)/.test(navigator.userAgent)?a.sandbox+=" allow-top-navigation-by-user-activation":a.sandbox+=" allow-top-navigation",a},t.exports.logCounter=function(e,t){window.ue&&"function"==typeof window.ue.count&&window.ue.count(e,t)},t.exports.collapseSlot=function(e){var t=document.getElementById(e);void 0!==t&&t&&(t.style.display="none")},t.exports.setResizePlacementStyle=function(e,t,n){var a=document.getElementById(t[e].placementDivId),o=document.getElementById(t[e].wrapperDivId)||a,i=document.getElementById(t[e].iframeId),r=n.resizePlacementWidthThreshold,s=n.resizePlacementStyleAboveThreshold,d=n.resizePlacementStyleBelowThreshold;r=parseInt(r,10),o&&i&&r&&s&&d&&(o.offsetWidth<r?f.setObjectStyles(i,d):f.setObjectStyles(i,s))},t.exports.resizeSafeFrameAd=function(t,e,n,a,o,i){try{var r=document.getElementById(i[t].placementDivId),s=document.getElementById(i[t].wrapperDivId)||r,d=document.getElementById(i[t].iframeId);if(null===s||null===r||null===d)return;var c=x(n),l=x(e),u=!l&&!c,p=parseInt(e,10),f=l?d.offsetWidth:p,m=c?d.offsetHeight:parseInt(n,10),g=parseInt(a,10),h=function(e){u&&(m=Math.round(e*m/f)),f=Math.round(e)},w=0===s.offsetWidth?S.windowWidth():s.offsetWidth;g&&S.windowHeight()<S.windowWidth()?h(g):h(w),o&&o.adMap&&o.adMap[t]&&o.adMap[t].options&&o.adMap[t].options.slotSnapshot&&(o.adMap[t].options.slotSnapshot.adHeight=m,o.adMap[t].options.slotSnapshot.adWidth=f);var v=A(f),y=A(u?m:n);d.style.height=y;var b={width:d.style.width=v,height:y};s!==r&&(r.style.height=y,o.sendMessageToAd(t,"resizeCreativeWrapper",b)),"Detail_hero-quick-promo_Desktop"===i[t].slotId&&(E(i[t].slotId,o.adMap[t].options.placementId,"OffsetLeft",d.offsetLeft),E(i[t].slotId,o.adMap[t].options.placementId,"OffsetTop",d.offsetTop),E(i[t].slotId,o.adMap[t].options.placementId,"OffsetWidth",d.offsetWidth),E(i[t].slotId,o.adMap[t].options.placementId,"OffsetHeight",d.offsetHeight))}catch(e){T("Error resizing ad: "+i[t].slotId,e)}},t.exports.delayLoad=function(e,t,n,a){var o="undefined"!=typeof P,i="undefined"!=typeof amznJQ,r="number"==typeof n&&0!==n?function(){setTimeout(t,n)}:t;if("windowOnLoad"===e)"complete"===document.readyState?r():f.addWindowListener("load",r);else if("spATFEvent"===e)o?P.when("search-page-utilities").execute(function(e){e.afterEvent("spATFEvent",r)}):i?amznJQ.available("search-js-general",function(){window.SPUtils.afterEvent("spATFEvent",r)}):r();else if("aboveTheFold"===e)o?P.when("af").execute(r):i?amznJQ.onCompletion("amznJQ.AboveTheFold",r):r();else if("criticalFeature"===e)o?P.when("cf").execute(r):i?amznJQ.onCompletion("amznJQ.criticalFeature",r):r();else if("r2OnLoad"===e)o?P.when("r2Loaded").execute(r):i?amznJQ.onReady("r2Loaded",r):r();else if(e.match("[^:]+:.+")){var s=e.split(":"),d=s[0].split("."),c=s[1],l=2<s.length?s[2]:c;o?P.when(l,"A").execute(r):i&&1<d.length?amznJQ[d[1]](c,r):r()}else if(e.match(/^\d{1,4}px$/g))p(parseInt(e,10),r,a,function(e,t){return e&&S.findDistanceFromViewport(e)<=t});else{var u=/^reached(\d{1,5}px)FromTop$/g.exec(e);u?p(parseInt(u[1],10),r,a,function(e,t){return S.findVerticalPositionReached()>=t}):r()}},t.exports.getMediaCentralOrigin=u,t.exports.sizeValidator=function(e,t){return e.height===t.height&&e.width===t.width},t.exports.checkAgainstAllowlist=function(e,t,n){if(!t||"object"!=typeof t)return!1;for(var a=0,o=t.length;a<o;a++)if(n(e,t[a]))return!0;return!1},t.exports.isInterSectionObserverSupported=h},{"../../components/util":9,"../components/viewability":15,"../metrics/counters":18,"../metrics/csa":19,"../metrics/csm":20}],18:[function(e,t,n){t.exports.AD_LOAD_COUNTERS={START:"adload:start",CALLBACK:"adload:delayloadcallback",IFRAME_CREATED:"adload:iframecreated"},t.exports.CACHE_COUNTERS={SF_LIBRARY:"cache:sflibrary:",SF_HTML:"cache:sfhtml:"},t.exports.FEEDBACK_COUNTERS={REQUEST:"adfeedback:request",SUCCESS:"adfeedback:success",ERROR:"adfeedback:error",LABEL_RENDER:"adfeedback:sponsoredlabelrender"},t.exports.MESSENGER_COUNTERS={API:"messenger:"},t.exports.ABP_STATUS_COUNTERS={1:"abpstatus:enabled",0:"abpstatus:notenabled","-1":"abpstatus:unknown"},t.exports.SF_VERSION_COUNTERS={VERSION:"sfversion"},t.exports.RESOURCE_TIMING_DATA_COUNTERS={NEXUS_CLIENT_NOT_DEFINED:"ResourceTimingData.NexusClientNotDefined",LOGGING_FAILED:"ResourceTimingData.LoggingFailed",LOGGING_SUCCESSFUL:"ResourceTimingData.LoggingSuccessful",DEPENDENCIES_NOT_MET:"ResourceTimingData.DependenciesNotMet"},t.exports.CUSTOM_MESSAGE_COUNTERS={ALLOWLISTED:"custommessage:allowlisted",NOT_ALLOWLISTED:"custommessage:notallowlisted"},t.exports.PIXEL_CONDITIONS={PAGE_PRERENDER:"pixelcondition:pageprerender",AD_MISSING:"pixelcondition:admissing"}},{}],19:[function(e,t,n){var a=e("../messenger/msgHandler"),o={};t.exports.initCsaLatencyPlugin=function(e){window.csa&&(o.latencyPlugin=window.csa("Content",{element:e}))},t.exports.markCsaLatencyMetric=function(e,t){try{o.latencyPlugin("mark",e,t)}catch(e){a.logError("Error with initiating CSA",e)}},t.exports.initCsaEvents=function(){window.csa&&(o.events=window.csa("Events",{producerId:"adplacements"}))},t.exports.logCsaEvent=function(e,t,n){try{o.events("log",{schemaId:"ApeSafeframe.csaEvent.1",metricName:e+":"+t+":"+n,metricValue:1},{ent:"all"})}catch(e){a.logError("Error with initiating CSA",e)}},t.exports.addCsaEntity=function(e){try{o.events("setEntity",{adCreativeMetaData:e})}catch(e){a.logError("Error with initiating CSA",e)}},t.exports.csa=o},{"../messenger/msgHandler":17}],20:[function(e,t,n){var s={bb:"uet",af:"uet",cf:"uet",be:"uet",ld:"uex"};function d(e,t,n,a){var o=[e,t,n];return a&&o.push(a),o}t.exports.sendCsmLatencyMetric=function(e,t,n,a,o){if(s.hasOwnProperty(e)){var i=s[e],r=a?a+":":"";"function"==typeof window[i]&&(window[i].apply(this,d(e,"adplacements:"+r+t.replace(/_/g,":"),{wb:1},o)),n&&window[i].apply(this,d(e,"adplacements:"+r+n,{wb:1},o)))}},t.exports.sendCsmCounter=function(e,t,n,a){if(window.ue&&"function"==typeof window.ue.count){var o="adplacements:"+n;if(e&&(o+=":"+e.replace(/_/g,":")),window.ue.count(o,a),t){var i="adplacements:"+(n&&t?n+":":n)+t;window.ue.count(i,a)}}},t.exports.addCsmTag=function(e,t,n,a){if(window.ue&&window.ue.tag){if(t){var o=e+":"+t.replace(/_/g,":")+(a?":"+a:"");window.ue.tag(o)}if(n){var i=e+":"+n+(a?":"+a:"");window.ue.tag(i)}t||n||window.ue.tag(e+(a?":"+a:""))}}},{}],21:[function(e,t,n){t.exports.AD_LOAD_EVENTS={START:"adload_start",CALLBACK:"adload_delayload",IFRAME_CREATED:"adload_iframecreated"},t.exports.CACHE_EVENTS={SF_LIBRARY:"sflibrary_",SF_HTML:"sfhtml_"},t.exports.FEEDBACK_EVENTS={REQUEST:"adfeedback_request",SUCCESS:"adfeedback_success",ERROR:"adfeedback_error",LABEL_RENDER:"adfeedback_sponsoredlabelrender"},t.exports.ABP_STATUS_EVENTS={1:"abpstatus_enabled",0:"abpstatus_notenabled","-1":"abpstatus_unknown"},t.exports.SF_VERSION_EVENTS={VERSION:"sfversion_"},t.exports.RESOURCE_TIMING_DATA_EVENTS={LOGGING_FAILED:"resourceTimingData_LoggingFailed",LOGGING_SUCCESSFUL:"resourceTimingData_LoggingSuccessful",DEPENDENCIES_NOT_MET:"resourceTimingData_DependenciesNotMet",DEPENDENCIES_MET:"resourceTimingData_DependenciesMet"}},{}]},{},[10]);